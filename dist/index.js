"use strict";var Ge=Object.create;var X=Object.defineProperty;var Ye=Object.getOwnPropertyDescriptor;var Ze=Object.getOwnPropertyNames;var Xe=Object.getPrototypeOf,Qe=Object.prototype.hasOwnProperty;var et=(r,e,t,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Ze(e))!Qe.call(r,n)&&n!==t&&X(r,n,{get:()=>e[n],enumerable:!(s=Ye(e,n))||s.enumerable});return r};var Q=(r,e,t)=>(t=r!=null?Ge(Xe(r)):{},et(e||!r||!r.__esModule?X(t,"default",{value:r,enumerable:!0}):t,r));Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const tt=require("better-auth/react"),ee=require("better-auth/client/plugins"),at=require("better-auth"),rt=require("better-auth/plugins"),st=require("better-auth/adapters/drizzle"),nt=require("@libsql/client"),ot=require("drizzle-orm/libsql"),a=require("drizzle-orm/sqlite-core"),it=require("crypto"),lt=require("ethers"),ct=require("clsx"),dt=require("tailwind-merge"),ut=require("@/lib/stocks/yfinance-wrapper"),I=require("axios"),K=require("node:fs"),mt=require("node:path"),pt=require("@alpacahq/alpaca-trade-api"),te=require("grab-url"),yt=require("fs/promises"),h=require("@/lib/db"),u=require("@/lib/db/schema"),_=require("drizzle-orm"),gt=require("tavily"),ht=require("@langchain/groq"),D=require("fs"),ft=require("yahoo-finance2"),se=tt.createAuthClient({baseURL:process.env.NEXT_PUBLIC_APP_URL||(typeof window<"u"?window.location.origin:"http://localhost:3000"),plugins:[ee.siweClient(),ee.oneTapClient({clientId:process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID})]}),{useSession:wt,signIn:kt,signOut:vt}=se,f=a.sqliteTable("users",{id:a.text("id").primaryKey(),name:a.text("name").notNull(),email:a.text("email").notNull().unique(),emailVerified:a.integer("email_verified",{mode:"boolean"}).default(!1),image:a.text("image"),apiKey:a.text("api_key").unique(),usageCount:a.integer("usage_count").default(0),alpacaKeyId:a.text("alpaca_key_id"),alpacaSecretKey:a.text("alpaca_secret_key"),alpacaPaper:a.integer("alpaca_paper",{mode:"boolean"}).default(!0),surveyResponse:a.text("survey_response"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),ne=a.sqliteTable("sessions",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),expiresAt:a.integer("expires_at",{mode:"timestamp"}).notNull(),token:a.text("token").notNull().unique(),ipAddress:a.text("ip_address"),userAgent:a.text("user_agent"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),oe=a.sqliteTable("accounts",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),accountId:a.text("account_id").notNull(),providerId:a.text("provider_id").notNull(),accessToken:a.text("access_token"),refreshToken:a.text("refresh_token"),idToken:a.text("id_token"),expiresAt:a.integer("expires_at",{mode:"timestamp"}),accessTokenExpiresAt:a.integer("access_token_expires_at",{mode:"timestamp"}),scope:a.text("scope"),password:a.text("password"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),ie=a.sqliteTable("verifications",{id:a.text("id").primaryKey(),identifier:a.text("identifier").notNull(),value:a.text("value").notNull(),expiresAt:a.integer("expires_at",{mode:"timestamp"}).notNull(),createdAt:a.integer("created_at",{mode:"timestamp"}),updatedAt:a.integer("updated_at",{mode:"timestamp"})}),bt=a.sqliteTable("wallet_addresses",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),walletAddress:a.text("wallet_address").notNull().unique(),chainId:a.integer("chain_id"),isPrimary:a.integer("is_primary",{mode:"boolean"}).default(!1),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),_t=a.sqliteTable("user_settings",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}).unique(),groqApiKey:a.text("groq_api_key"),openaiApiKey:a.text("openai_api_key"),anthropicApiKey:a.text("anthropic_api_key"),xaiApiKey:a.text("xai_api_key"),googleApiKey:a.text("google_api_key"),togetheraiApiKey:a.text("togetherai_api_key"),perplexityApiKey:a.text("perplexity_api_key"),cloudflareApiKey:a.text("cloudflare_api_key"),alpacaApiKey:a.text("alpaca_api_key"),alpacaApiSecret:a.text("alpaca_api_secret"),alpacaBaseUrl:a.text("alpaca_base_url"),webullUsername:a.text("webull_username"),webullPassword:a.text("webull_password"),robinhoodUsername:a.text("robinhood_username"),robinhoodPassword:a.text("robinhood_password"),ibkrUsername:a.text("ibkr_username"),ibkrPassword:a.text("ibkr_password"),alphaVantageApiKey:a.text("alpha_vantage_api_key"),finnhubApiKey:a.text("finnhub_api_key"),polygonApiKey:a.text("polygon_api_key"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),At=a.sqliteTable("strategies",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),name:a.text("name").notNull(),type:a.text("type").notNull(),status:a.text("status").notNull().default("paused"),riskLevel:a.text("risk_level").notNull().default("medium"),todayPnL:a.real("today_pnl").default(0),last7DaysPnL:a.real("last_7days_pnl").default(0),last30DaysPnL:a.real("last_30days_pnl").default(0),winRate:a.real("win_rate").default(0),activeMarkets:a.integer("active_markets").default(0),tradesToday:a.integer("trades_today").default(0),config:a.text("config"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),le=a.sqliteTable("watchlists",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),name:a.text("name").notNull(),description:a.text("description"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),Tt=a.sqliteTable("watchlist",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),watchlistId:a.text("watchlist_id").references(()=>le.id,{onDelete:"cascade"}),symbol:a.text("symbol").notNull(),name:a.text("name"),addedAt:a.integer("added_at",{mode:"timestamp"}).notNull()}),St=a.sqliteTable("signals",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),asset:a.text("asset").notNull(),type:a.text("type").notNull(),combinedScore:a.real("combined_score").notNull(),scoreLabel:a.text("score_label").notNull(),fundamentalsScore:a.real("fundamentals_score"),vixScore:a.real("vix_score"),technicalScore:a.real("technical_score"),sentimentScore:a.real("sentiment_score"),strategy:a.text("strategy"),timeframe:a.text("timeframe"),suggestedAction:a.text("suggested_action"),suggestedSize:a.text("suggested_size"),metadata:a.text("metadata"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),Pt=a.sqliteTable("positions",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),asset:a.text("asset").notNull(),type:a.text("type").notNull(),entryPrice:a.real("entry_price").notNull(),currentPrice:a.real("current_price").notNull(),size:a.real("size").notNull(),unrealizedPnL:a.real("unrealized_pnl").default(0),unrealizedPnLPercent:a.real("unrealized_pnl_percent").default(0),strategy:a.text("strategy"),openedBy:a.text("opened_by"),openedAt:a.integer("opened_at",{mode:"timestamp"}).notNull(),closedAt:a.integer("closed_at",{mode:"timestamp"}),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),Nt=a.sqliteTable("trades",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),asset:a.text("asset").notNull(),type:a.text("type").notNull(),action:a.text("action").notNull(),price:a.real("price").notNull(),size:a.real("size").notNull(),pnl:a.real("pnl"),strategy:a.text("strategy"),copiedFrom:a.text("copied_from"),timestamp:a.integer("timestamp",{mode:"timestamp"}).notNull(),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),xt=a.sqliteTable("portfolios",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}).unique(),totalEquity:a.real("total_equity").default(1e5),cash:a.real("cash").default(1e5),stocks:a.real("stocks").default(0),predictionMarkets:a.real("prediction_markets").default(0),margin:a.real("margin").default(0),dailyPnL:a.real("daily_pnl").default(0),dailyPnLPercent:a.real("daily_pnl_percent").default(0),winRate:a.real("win_rate").default(0),openPositions:a.integer("open_positions").default(0),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),Dt=a.sqliteTable("polymarket_leaders",{trader:a.text("trader").primaryKey(),rank:a.integer("rank"),userName:a.text("user_name"),xUsername:a.text("x_username"),verifiedBadge:a.integer("verified_badge",{mode:"boolean"}),profileImage:a.text("profile_image"),vol:a.real("vol"),pnl:a.real("pnl"),overallGain:a.real("overall_gain"),winRate:a.real("win_rate"),activePositions:a.integer("active_positions"),totalPositions:a.integer("total_positions"),currentValue:a.real("current_value"),winAmount:a.real("win_amount"),lossAmount:a.real("loss_amount"),updatedAt:a.integer("updated_at",{mode:"timestamp"})}),Lt=a.sqliteTable("polymarket_positions",{id:a.text("id").primaryKey(),traderId:a.text("trader_id").notNull(),marketId:a.text("market_id"),marketTitle:a.text("market_title"),cashPnl:a.real("cash_pnl"),realizedPnl:a.real("realized_pnl"),tags:a.text("tags"),createdAt:a.integer("created_at",{mode:"timestamp"})}),Mt=a.sqliteTable("polymarket_categories",{tag:a.text("tag").primaryKey(),pnl:a.real("pnl"),updatedAt:a.integer("updated_at",{mode:"timestamp"})}),Ct=a.sqliteTable("polymarket_markets",{id:a.text("id").primaryKey(),question:a.text("question").notNull(),slug:a.text("slug").notNull(),description:a.text("description"),image:a.text("image"),volume24hr:a.real("volume_24hr"),volumeTotal:a.real("volume_total"),active:a.integer("active",{mode:"boolean"}).default(!0),closed:a.integer("closed",{mode:"boolean"}).default(!1),outcomes:a.text("outcomes").notNull(),outcomePrices:a.text("outcome_prices").notNull(),tags:a.text("tags"),endDate:a.text("end_date"),groupItemTitle:a.text("group_item_title"),enableOrderBook:a.integer("enable_order_book",{mode:"boolean"}),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),It=a.sqliteTable("polymarket_market_positions",{id:a.text("id").primaryKey(),marketId:a.text("market_id").notNull(),outcome:a.text("outcome").notNull(),price:a.real("price").notNull(),size:a.real("size").notNull(),side:a.text("side").notNull(),totalValue:a.real("total_value").notNull(),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),Rt=a.sqliteTable("polymarket_debates",{id:a.text("id").primaryKey(),marketId:a.text("market_id").notNull().unique(),question:a.text("question").notNull(),yesArguments:a.text("yes_arguments").notNull(),noArguments:a.text("no_arguments").notNull(),yesSummary:a.text("yes_summary").notNull(),noSummary:a.text("no_summary").notNull(),keyFactors:a.text("key_factors").notNull(),uncertainties:a.text("uncertainties").notNull(),currentYesPrice:a.real("current_yes_price"),currentNoPrice:a.real("current_no_price"),llmProvider:a.text("llm_provider"),model:a.text("model"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),$t=a.sqliteTable("zulu_traders",{providerId:a.integer("provider_id").primaryKey(),name:a.text("name"),strategyDesc:a.text("strategy_desc"),countryCode:a.text("country_code"),countryName:a.text("country_name"),brokerName:a.text("broker_name"),balance:a.real("balance"),equity:a.real("equity"),followers:a.integer("followers"),liveFollowers:a.integer("live_followers"),roiAnnualized:a.real("roi_annualized"),roiProfit:a.real("roi_profit"),zuluRank:a.integer("zulu_rank"),bestTrade:a.real("best_trade"),worstTrade:a.real("worst_trade"),profitableTrades:a.integer("profitable_trades"),losingTrades:a.integer("losing_trades"),avgDrawdown:a.real("avg_drawdown"),maxDrawdown:a.real("max_drawdown"),maxDrawdownPercent:a.real("max_drawdown_percent"),leverage:a.real("leverage"),isEa:a.integer("is_ea"),currencies:a.text("currencies"),weeks:a.integer("weeks"),demo:a.integer("demo"),avgTradeSeconds:a.integer("avg_trade_seconds"),avgPnlPerTrade:a.real("avg_pnl_per_trade"),winRate:a.real("win_rate"),totalTrades:a.integer("total_trades"),pageVisits:a.integer("page_visits"),includedInWatchlist:a.integer("included_in_watchlist"),registrationDate:a.integer("registration_date",{mode:"timestamp"}),lastOpenTradeDate:a.integer("last_open_trade_date",{mode:"timestamp"}),updatedAt:a.integer("updated_at",{mode:"timestamp"})}),Ot=a.sqliteTable("zulu_currency_stats",{id:a.text("id").primaryKey(),providerId:a.integer("provider_id").notNull(),currencyName:a.text("currency_name"),totalCount:a.integer("total_count"),winCount:a.integer("win_count"),winPercent:a.real("win_percent"),totalBuyCount:a.integer("total_buy_count"),totalSellCount:a.integer("total_sell_count"),pips:a.real("pips"),createdAt:a.integer("created_at",{mode:"timestamp"})}),Et=a.sqliteTable("agent_api_logs",{id:a.text("id").primaryKey(),userId:a.text("user_id").references(()=>f.id,{onDelete:"set null"}),symbol:a.text("symbol").notNull(),requestPayload:a.text("request_payload"),responseSignal:a.text("response_signal"),responseAnalysis:a.text("response_analysis"),llmProvider:a.text("llm_provider"),model:a.text("model_used"),timestamp:a.integer("timestamp",{mode:"timestamp"}).notNull(),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),j=a.sqliteTable("organizations",{id:a.text("id").primaryKey(),name:a.text("name").notNull(),description:a.text("description"),image:a.text("image"),ownerId:a.text("owner_id").notNull().references(()=>f.id,{onDelete:"cascade"}),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),qt=a.sqliteTable("organization_members",{id:a.text("id").primaryKey(),organizationId:a.text("organization_id").notNull().references(()=>j.id,{onDelete:"cascade"}),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),role:a.text("role").notNull().default("member"),joinedAt:a.integer("joined_at",{mode:"timestamp"}).notNull()}),G=a.sqliteTable("teams",{id:a.text("id").primaryKey(),organizationId:a.text("organization_id").notNull().references(()=>j.id,{onDelete:"cascade"}),name:a.text("name").notNull(),description:a.text("description"),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),zt=a.sqliteTable("team_members",{id:a.text("id").primaryKey(),teamId:a.text("team_id").notNull().references(()=>G.id,{onDelete:"cascade"}),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),role:a.text("role").notNull().default("member"),joinedAt:a.integer("joined_at",{mode:"timestamp"}).notNull()}),Ut=a.sqliteTable("user_follows",{id:a.text("id").primaryKey(),followerId:a.text("follower_id").notNull().references(()=>f.id,{onDelete:"cascade"}),followingId:a.text("following_id").notNull().references(()=>f.id,{onDelete:"cascade"}),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),Ft=a.sqliteTable("user_invitations",{id:a.text("id").primaryKey(),inviterId:a.text("inviter_id").notNull().references(()=>f.id,{onDelete:"cascade"}),email:a.text("email").notNull(),status:a.text("status").notNull().default("pending"),organizationId:a.text("organization_id").references(()=>j.id,{onDelete:"cascade"}),teamId:a.text("team_id").references(()=>G.id,{onDelete:"cascade"}),expiresAt:a.integer("expires_at",{mode:"timestamp"}).notNull(),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),Bt=a.sqliteTable("shared_items",{id:a.text("id").primaryKey(),sharedById:a.text("shared_by_id").notNull().references(()=>f.id,{onDelete:"cascade"}),sharedWithEmail:a.text("shared_with_email").notNull(),sharedWithUserId:a.text("shared_with_user_id").references(()=>f.id,{onDelete:"set null"}),itemType:a.text("item_type").notNull(),itemId:a.text("item_id").notNull(),symbol:a.text("symbol"),title:a.text("title"),message:a.text("message"),metadata:a.text("metadata"),viewedAt:a.integer("viewed_at",{mode:"timestamp"}),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),jt=a.sqliteTable("notifications",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),type:a.text("type").notNull(),title:a.text("title").notNull(),message:a.text("message").notNull(),actionUrl:a.text("action_url"),fromUserId:a.text("from_user_id").references(()=>f.id,{onDelete:"cascade"}),relatedItemType:a.text("related_item_type"),relatedItemId:a.text("related_item_id"),read:a.integer("read",{mode:"boolean"}).default(!1),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),ce=a.sqliteTable("comments",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),itemType:a.text("item_type").notNull(),itemId:a.text("item_id").notNull(),parentCommentId:a.text("parent_comment_id").references(()=>ce.id,{onDelete:"cascade"}),content:a.text("content").notNull(),editedAt:a.integer("edited_at",{mode:"timestamp"}),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull(),updatedAt:a.integer("updated_at",{mode:"timestamp"}).notNull()}),Wt=a.sqliteTable("likes",{id:a.text("id").primaryKey(),userId:a.text("user_id").notNull().references(()=>f.id,{onDelete:"cascade"}),itemType:a.text("item_type").notNull(),itemId:a.text("item_id").notNull(),createdAt:a.integer("created_at",{mode:"timestamp"}).notNull()}),Kt=Object.freeze(Object.defineProperty({__proto__:null,accounts:oe,agentApiLogs:Et,comments:ce,likes:Wt,notifications:jt,organizationMembers:qt,organizations:j,polymarketCategories:Mt,polymarketDebates:Rt,polymarketLeaders:Dt,polymarketMarketPositions:It,polymarketMarkets:Ct,polymarketPositions:Lt,portfolios:xt,positions:Pt,sessions:ne,sharedItems:Bt,signals:St,strategies:At,teamMembers:zt,teams:G,trades:Nt,userFollows:Ut,userInvitations:Ft,userSettings:_t,users:f,verifications:ie,walletAddresses:bt,watchlist:Tt,watchlists:le,zuluCurrencyStats:Ot,zuluTraders:$t},Symbol.toStringTag,{value:"Module"})),Vt=nt.createClient({url:process.env.DATABASE_URL||"file:./local.db",authToken:process.env.DATABASE_AUTH_TOKEN}),de=ot.drizzle(Vt,{schema:Kt}),Ht=at.betterAuth({baseURL:process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000",secret:process.env.BETTER_AUTH_SECRET||process.env.AUTH_SECRET||"your-secret-key",database:st.drizzleAdapter(de,{provider:"sqlite",schema:{user:f,session:ne,account:oe,verification:ie}}),socialProviders:{google:{clientId:process.env.GOOGLE_CLIENT_ID||"",clientSecret:process.env.GOOGLE_CLIENT_SECRET||""}},plugins:[rt.siwe({domain:process.env.NEXT_PUBLIC_APP_DOMAIN||"localhost:3000",anonymous:!1,getNonce:async()=>it.randomBytes(32).toString("hex"),verifyMessage:async({message:r,signature:e,chainId:t})=>{try{const s=lt.verifyMessage(r,e);return t&&t!==1&&t!==11155111&&t!==31337&&console.warn(`Unsupported chain ID: ${t}`),!!s}catch(s){return console.error("Message verification failed:",s),!1}}})],emailAndPassword:{enabled:!0,minPasswordLength:8},trustedOrigins:[process.env.NEXT_PUBLIC_APP_URL||"http://localhost:3000"],session:{expiresIn:3600*24*60,updateAge:3600*24*3}}),Jt="TimeTravel",Gt="support@timetravel.investments",Yt="2025-12-16",Zt={totalEquity:524750,dailyPnL:8420,dailyPnLPercent:1.63,winRate:64.2,openPositions:18,cash:125e3,margin:75e3,stocks:35e4,predictionMarkets:49750},Xt=[{id:"buy-hold",name:"Buy Hold",description:"Simple buy and hold strategy for long-term investment",todayPnL:1200,last7DaysPnL:8500,last30DaysPnL:32400,winRate:65,activeMarkets:10,tradesToday:0,status:"running",timeframe:"Long-term",riskLevel:"low",bestConditions:"Bullish markets, stable growth",avoidWhen:"Bear markets, high volatility"},{id:"awesome-oscillator",name:"Awesome Oscillator",description:"Measures market momentum using 5-34 period simple moving averages",todayPnL:2340,last7DaysPnL:11200,last30DaysPnL:38900,winRate:56.8,activeMarkets:8,tradesToday:6,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Trending markets, clear momentum",avoidWhen:"Choppy markets, low volatility"},{id:"rsi-2",name:"RSI 2",description:"Short-term mean reversion using 2-period RSI for extreme readings",todayPnL:1890,last7DaysPnL:9400,last30DaysPnL:41200,winRate:62.3,activeMarkets:12,tradesToday:8,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Range-bound markets, mean reversion",avoidWhen:"Strong trending markets"},{id:"ichimoku-cloud",name:"Ichimoku Cloud",description:"Japanese technical system showing support, resistance, momentum and trend",todayPnL:3120,last7DaysPnL:14500,last30DaysPnL:52300,winRate:58.9,activeMarkets:9,tradesToday:5,status:"running",timeframe:"Daily to Weekly",riskLevel:"medium",bestConditions:"Clear trends, trending markets",avoidWhen:"Choppy, sideways markets"},{id:"stochastic-oscillator",name:"Stochastic Oscillator",description:"Momentum indicator comparing closing price to price range over time",todayPnL:1560,last7DaysPnL:7800,last30DaysPnL:29400,winRate:54.2,activeMarkets:10,tradesToday:7,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Overbought/oversold conditions",avoidWhen:"Strong trending markets"},{id:"williams-r",name:"Williams R",description:"Momentum indicator showing overbought/oversold levels",todayPnL:980,last7DaysPnL:5600,last30DaysPnL:22100,winRate:52.8,activeMarkets:7,tradesToday:4,status:"running",timeframe:"Daily",riskLevel:"low",bestConditions:"Range-bound markets",avoidWhen:"Strong trends"},{id:"apo",name:"Absolute Price Oscillator (APO)",description:"Difference between two moving averages expressed as absolute value",todayPnL:2100,last7DaysPnL:10200,last30DaysPnL:38700,winRate:55.4,activeMarkets:11,tradesToday:6,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Trending markets",avoidWhen:"Sideways markets"},{id:"aroon",name:"Aroon Strategy",description:"Identifies trend changes and strength using Aroon up/down indicators",todayPnL:1740,last7DaysPnL:8900,last30DaysPnL:35600,winRate:57.1,activeMarkets:9,tradesToday:5,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"New trends forming",avoidWhen:"Consolidation periods"},{id:"bop",name:"Balance of Power (BOM)",description:"Measures buying and selling pressure in the market",todayPnL:1420,last7DaysPnL:6800,last30DaysPnL:28300,winRate:53.6,activeMarkets:8,tradesToday:4,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Strong directional moves",avoidWhen:"Low volume, sideways"},{id:"cfo",name:"Chande Forecast Oscillator (CFO)",description:"Percentage difference between actual and forecasted price",todayPnL:890,last7DaysPnL:4500,last30DaysPnL:19800,winRate:51.2,activeMarkets:6,tradesToday:3,status:"paper",timeframe:"Daily",riskLevel:"low",bestConditions:"Trend following",avoidWhen:"Erratic price action"},{id:"kdj",name:"KDJ Strategy",description:"Enhanced stochastic indicator with J line for earlier signals",todayPnL:2680,last7DaysPnL:12100,last30DaysPnL:46200,winRate:59.4,activeMarkets:10,tradesToday:7,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Trending with pullbacks",avoidWhen:"Choppy markets"},{id:"macd",name:"MACD Strategy",description:"Moving Average Convergence Divergence for trend and momentum",todayPnL:3450,last7DaysPnL:15800,last30DaysPnL:58400,winRate:61.2,activeMarkets:14,tradesToday:9,status:"running",timeframe:"Daily to Weekly",riskLevel:"medium",bestConditions:"Clear trends, momentum shifts",avoidWhen:"Sideways, low volatility"},{id:"psar",name:"Parabolic SAR",description:"Stop and Reverse system for trailing stops and trend reversals",todayPnL:2230,last7DaysPnL:10800,last30DaysPnL:42500,winRate:56.7,activeMarkets:11,tradesToday:6,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Strong trending markets",avoidWhen:"Choppy, ranging markets"},{id:"typical-price",name:"Typical Price",description:"Uses average of high, low, and close for trend identification",todayPnL:1150,last7DaysPnL:5900,last30DaysPnL:24700,winRate:52.9,activeMarkets:7,tradesToday:4,status:"paper",timeframe:"Daily",riskLevel:"low",bestConditions:"Stable trends",avoidWhen:"Volatile markets"},{id:"vortex",name:"Vortex Strategy",description:"Identifies trend starts and direction using positive/negative movement",todayPnL:1890,last7DaysPnL:8700,last30DaysPnL:34200,winRate:55.8,activeMarkets:9,tradesToday:5,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Trend reversals",avoidWhen:"Sideways markets"},{id:"acceleration-bands",name:"Acceleration Bands",description:"Envelope bands based on price movement to identify breakouts",todayPnL:2540,last7DaysPnL:11600,last30DaysPnL:44800,winRate:57.3,activeMarkets:10,tradesToday:6,status:"running",timeframe:"Daily",riskLevel:"high",bestConditions:"Volatility expansion",avoidWhen:"Low volatility"},{id:"bollinger-bands",name:"Bollinger Bands",description:"Volatility bands around moving average for overbought/oversold",todayPnL:3780,last7DaysPnL:16200,last30DaysPnL:61500,winRate:62.8,activeMarkets:15,tradesToday:10,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Range-bound with volatility",avoidWhen:"Strong trends"},{id:"projection-oscillator",name:"Projection Oscillator",description:"Projects price momentum using volatility and trend strength",todayPnL:1670,last7DaysPnL:7900,last30DaysPnL:31200,winRate:54.6,activeMarkets:8,tradesToday:5,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Volatile markets",avoidWhen:"Low volatility"},{id:"cmf",name:"Chaikin Money Flow (CMF)",description:"Volume-weighted average of accumulation and distribution",todayPnL:2890,last7DaysPnL:13400,last30DaysPnL:49800,winRate:59.7,activeMarkets:11,tradesToday:7,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"High volume trends",avoidWhen:"Low volume periods"},{id:"emv",name:"Ease of Movement (EMV)",description:"Relates price change to volume for effortless price movement",todayPnL:1340,last7DaysPnL:6200,last30DaysPnL:26400,winRate:53.2,activeMarkets:7,tradesToday:4,status:"paper",timeframe:"Daily",riskLevel:"low",bestConditions:"Easy price movement",avoidWhen:"Heavy volume churn"},{id:"force-index",name:"Force Index",description:"Combines price and volume to measure buying/selling pressure",todayPnL:2120,last7DaysPnL:9800,last30DaysPnL:38100,winRate:56.1,activeMarkets:9,tradesToday:6,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Volume confirmation",avoidWhen:"Thin volume"},{id:"mfi",name:"Money Flow Index",description:"Volume-weighted RSI showing money flowing in/out of security",todayPnL:3120,last7DaysPnL:14200,last30DaysPnL:53700,winRate:60.4,activeMarkets:13,tradesToday:8,status:"running",timeframe:"Daily",riskLevel:"medium",bestConditions:"Volume divergences",avoidWhen:"Low volume"},{id:"nvi",name:"Negative Volume Index (NVI)",description:"Tracks price changes on days when volume decreases",todayPnL:890,last7DaysPnL:4100,last30DaysPnL:18200,winRate:50.8,activeMarkets:5,tradesToday:3,status:"paper",timeframe:"Daily",riskLevel:"low",bestConditions:"Smart money accumulation",avoidWhen:"High volume days"},{id:"vwap",name:"Volume Weighted Average Price",description:"Average price weighted by volume, key for institutional trading",todayPnL:4200,last7DaysPnL:18900,last30DaysPnL:68400,winRate:64.5,activeMarkets:16,tradesToday:11,status:"running",timeframe:"Intraday",riskLevel:"medium",bestConditions:"Intraday trading",avoidWhen:"Low liquidity"}],Qt=[],ea=[{id:"fund-analyst",name:"Fundamentals Analyst",type:"analyst",queueLength:3,avgLatency:145,errorRate:.2,recentActivity:[]},{id:"sentiment-analyst",name:"Sentiment Analyst",type:"analyst",queueLength:5,avgLatency:89,errorRate:.5,recentActivity:[]},{id:"news-analyst",name:"News Analyst",type:"analyst",queueLength:2,avgLatency:112,errorRate:.1,recentActivity:[]},{id:"tech-analyst",name:"Technical Analyst",type:"analyst",queueLength:4,avgLatency:67,errorRate:.3,recentActivity:[]},{id:"bull-researcher",name:"Bull Researcher",type:"researcher",queueLength:2,avgLatency:234,errorRate:0,recentActivity:[]},{id:"bear-researcher",name:"Bear Researcher",type:"researcher",queueLength:2,avgLatency:241,errorRate:0,recentActivity:[]},{id:"trader",name:"Trader Agent",type:"trader",queueLength:6,avgLatency:45,errorRate:.8,recentActivity:[]},{id:"risk-mgmt",name:"Risk Management",type:"risk",queueLength:1,avgLatency:78,errorRate:.1,recentActivity:["Current VIX: 14.2 (Low volatility regime)","Portfolio heat: 72% of max exposure","Sector concentration check: Tech 42% (within limits)","Approved NVDA position: Size validated against volatility","Flagged correlation risk: 68% positions in tech sector"]},{id:"portfolio-mgr",name:"Portfolio Manager",type:"pm",queueLength:3,avgLatency:156,errorRate:0,recentActivity:["Approved: NVDA buy (risk-adjusted, edge validated)","Approved: META add (improves risk/reward profile)","Rejected: Oversized TSLA short (correlation risk with existing shorts)","Approved: Prediction market position (small size, uncorrelated)","Rebalancing: Reduced tech exposure from 48% to 42%"]}],ta=[{id:"pm1",platform:"Polymarket",eventName:"Trump wins 2028 Presidential Election",currentOdds:.42,volume:245e4,liquidity:85e4,expectedEdge:6,llmProbability:.48,category:"politics",timeToResolution:"1420 days",llmAnalysis:"Based on historical patterns, current sentiment analysis, and economic indicators, the LLM assigns a 48% probability vs market implied 42%. The model considers polling trends, economic forecasts, and historical re-election patterns. This represents a positive edge of +6%.",correlatedTickers:["XLE","XOP","DIA"]},{id:"pm2",platform:"Kalshi",eventName:"Fed cuts rates by 50bp in March",currentOdds:.28,volume:185e4,liquidity:65e4,expectedEdge:8.5,llmProbability:.365,category:"macro",timeToResolution:"89 days",llmAnalysis:"Recent Fed minutes and economic data suggest higher probability of aggressive rate cut than market pricing. CPI trending down, employment softening, and dovish Fed commentary all point to increased likelihood. Model probability 36.5% vs market 28%, edge of +8.5%.",correlatedTickers:["TLT","GLD","XLF"]},{id:"pm3",platform:"Polymarket",eventName:"Bitcoin above $100k by EOY",currentOdds:.62,volume:32e5,liquidity:12e5,expectedEdge:4.2,llmProbability:.58,category:"tech",timeToResolution:"28 days",llmAnalysis:"Market appears slightly overpriced. While institutional adoption continues and ETF flows are strong, technical resistance at $95k and historical year-end profit-taking suggest lower probability. Model shows 58% vs market 62%, negative edge of -4%, suggesting fade opportunity.",correlatedTickers:["MSTR","COIN","SQ"]},{id:"pm4",platform:"Kalshi",eventName:"S&P 500 above 5000 by March",currentOdds:.72,volume:165e4,liquidity:58e4,expectedEdge:5.8,llmProbability:.778,category:"macro",timeToResolution:"89 days",llmAnalysis:"Strong seasonal patterns, improving breadth, and rate cut expectations support higher probability. Current level 4850, only 3% gain needed. Historical Q1 returns and current momentum suggest 77.8% probability vs market 72%. Positive edge of +5.8%.",correlatedTickers:["SPY","QQQ","IWM"]},{id:"pm5",platform:"Polymarket",eventName:"NVIDIA market cap exceeds Apple by June",currentOdds:.38,volume:98e4,liquidity:34e4,expectedEdge:12.5,llmProbability:.505,category:"tech",timeToResolution:"180 days",llmAnalysis:"Market significantly underpricing this event. NVIDIA growth trajectory in AI, strong earnings momentum, and current gap of only $400B makes this very achievable. Historical precedent of rapid cap changes in tech. Model: 50.5% vs market 38%, exceptional edge of +12.5%.",correlatedTickers:["NVDA","AAPL","SMH"]}],aa=[{id:"trader1",name:"Nancy Pelosi",rank:1,overallPnL:245e4,winRate:72.3,activePositions:8,currentValue:152e5,avgHoldingPeriod:"45 days",maxDrawdown:-8.5,volatility:12.3,markets:["Tech stocks","Healthcare","Financial"]},{id:"trader2",name:"Warren Buffett (Berkshire)",rank:2,overallPnL:89e5,winRate:68.7,activePositions:42,currentValue:1285e5,avgHoldingPeriod:"1850 days",maxDrawdown:-15.2,volatility:8.9,markets:["Value stocks","Financial","Consumer"]},{id:"trader3",name:"@CryptoWhale247",rank:3,overallPnL:185e4,winRate:58.2,activePositions:24,currentValue:42e5,avgHoldingPeriod:"8 days",maxDrawdown:-28.5,volatility:42.6,markets:["Crypto prediction markets","Tech stocks"]},{id:"trader4",name:"Dan Loeb (Third Point)",rank:4,overallPnL:32e5,winRate:65.8,activePositions:18,currentValue:285e5,avgHoldingPeriod:"120 days",maxDrawdown:-12.8,volatility:15.4,markets:["Activist positions","Event-driven","Tech"]},{id:"trader5",name:"@PolymarketPro",rank:5,overallPnL:68e4,winRate:61.5,activePositions:35,currentValue:185e4,avgHoldingPeriod:"12 days",maxDrawdown:-18.5,volatility:28.5,markets:["Political markets","Macro events","Sports"]}],ra=[{id:"pos1",asset:"NVDA",type:"stock",entryPrice:782.5,currentPrice:852.3,size:200,unrealizedPnL:13960,unrealizedPnLPercent:8.92,strategy:"Momentum",openedBy:"Trader Agent",openedAt:"2024-11-15T10:30:00Z"},{id:"pos2",asset:"AAPL",type:"stock",entryPrice:178.2,currentPrice:182.45,size:300,unrealizedPnL:1275,unrealizedPnLPercent:2.38,strategy:"Momentum",openedBy:"Trader Agent",openedAt:"2024-11-20T14:15:00Z"},{id:"pos3",asset:"META",type:"stock",entryPrice:468.9,currentPrice:485.2,size:150,unrealizedPnL:2445,unrealizedPnLPercent:3.48,strategy:"Breakout",openedBy:"Trader Agent",openedAt:"2024-11-22T11:00:00Z"},{id:"pos4",asset:"TSLA",type:"stock",entryPrice:245.8,currentPrice:238.2,size:100,unrealizedPnL:-760,unrealizedPnLPercent:-3.09,strategy:"Mean Reversion",openedBy:"Trader Agent",openedAt:"2024-11-18T09:45:00Z"},{id:"pos5",asset:"Trump wins 2028",type:"prediction_market",entryPrice:.4,currentPrice:.42,size:15e3,unrealizedPnL:300,unrealizedPnLPercent:5,strategy:"PM-Edge",openedBy:"Trader Agent",openedAt:"2024-11-01T16:20:00Z"}],sa=[{id:"trade1",asset:"NVDA",type:"stock",action:"buy",price:852.3,size:100,strategy:"Momentum",timestamp:"2024-12-03T09:35:00Z"},{id:"trade2",asset:"META",type:"stock",action:"buy",price:485.2,size:75,strategy:"Breakout",timestamp:"2024-12-03T10:15:00Z"},{id:"trade3",asset:"GOOGL",type:"stock",action:"sell",price:142.8,size:150,pnl:2850,strategy:"Momentum",timestamp:"2024-12-02T15:45:00Z"},{id:"trade4",asset:"S&P 500 > 5000",type:"prediction_market",action:"buy",price:.72,size:1e4,strategy:"PM-Edge",timestamp:"2024-12-02T11:20:00Z"},{id:"trade5",asset:"MSFT",type:"stock",action:"sell",price:378.5,size:120,pnl:-580,strategy:"Mean Reversion",timestamp:"2024-12-01T14:30:00Z"}],na={vix:14.2,vixRegime:"Low",portfolioVolatility:18.5,maxSingleAsset:6.5,maxSector:42,currentLeverage:1.35,maxLeverage:2,varDaily:-12500,topConcentrations:[{name:"Technology",exposure:42},{name:"NVDA",exposure:6.5},{name:"Prediction Markets",exposure:9.5},{name:"META",exposure:5.2},{name:"AAPL",exposure:4.8}]};function oa(...r){return dt.twMerge(ct.clsx(r))}function ia(r,e=!1){if(typeof window>"u")return;const t=new URL(document?.location.href);return r&&(Object.entries(r).forEach(([s,n])=>{t.searchParams.set(s,n)}),e?window.history.pushState({},"",t):window.history.replaceState({},"",t)),Object.fromEntries(t.searchParams.entries())||{}}class ue{constructor(e,t){this.provider=e.llmProvider,this.model=t,this.temperature=e.temperature??.3,e.baseUrl?this.baseUrl=e.baseUrl:this.provider.toLowerCase()==="groq"&&(this.baseUrl="https://api.groq.com/openai/v1/chat/completions"),e.apiKeys?this.apiKey=e.apiKeys[this.provider]||"":this.apiKey=process.env[`${this.provider.toUpperCase()}_API_KEY`]||""}async invoke(e){const t=typeof e=="string"?[{role:"user",content:e}]:e;switch(this.provider.toLowerCase()){case"openai":return this.invokeOpenAI(t);case"groq":return this.invokeGroq(t);case"anthropic":return this.invokeAnthropic(t);default:throw new Error(`Unsupported LLM provider: ${this.provider}`)}}async invokeOpenAI(e){const t=this.baseUrl||"https://api.openai.com/v1/chat/completions",s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.model,messages:e,temperature:this.temperature})});if(!s.ok)throw new Error(`OpenAI API error: ${s.statusText}`);const n=await s.json();return{content:n.choices[0].message.content,toolCalls:n.choices[0].message.tool_calls?.map(o=>({name:o.function.name,arguments:JSON.parse(o.function.arguments)}))}}async invokeGroq(e){const t=this.baseUrl||"https://api.groq.com/openai/v1/chat/completions",s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.model,messages:e,temperature:this.temperature})});if(!s.ok){const o=await s.text();throw new Error(`Groq API error: ${s.statusText} - ${o}`)}const n=await s.json();return{content:n.choices[0].message.content,toolCalls:n.choices[0].message.tool_calls?.map(o=>({name:o.function.name,arguments:JSON.parse(o.function.arguments)}))}}async invokeAnthropic(e){const t=this.baseUrl||"https://api.anthropic.com/v1/messages",s=e.find(l=>l.role==="system"),n=e.filter(l=>l.role!=="system"),o=await fetch(t,{method:"POST",headers:{"Content-Type":"application/json","x-api-key":this.apiKey,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:this.model,max_tokens:4096,temperature:this.temperature,system:s?.content,messages:n.map(l=>({role:l.role==="assistant"?"assistant":"user",content:l.content}))})});if(!o.ok)throw new Error(`Anthropic API error: ${o.statusText}`);return{content:(await o.json()).content[0].text}}async invokeWithTools(e,t){switch(this.provider.toLowerCase()){case"openai":case"groq":return this.invokeWithToolsOpenAI(e,t);case"anthropic":return this.invoke(e);default:return this.invoke(e)}}async invokeWithToolsOpenAI(e,t){const s=this.provider.toLowerCase()==="groq"?this.baseUrl||"https://api.groq.com/openai/v1/chat/completions":this.baseUrl||"https://api.openai.com/v1/chat/completions",n=await fetch(s,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify({model:this.model,messages:e,temperature:this.temperature,tools:t,tool_choice:"auto"})});if(!n.ok){const i=await n.text();throw new Error(`${this.provider} API error: ${n.statusText} - ${i}`)}const o=await n.json();return{content:o.choices[0].message.content,toolCalls:o.choices[0].message.tool_calls?.map(i=>({name:i.function.name,arguments:JSON.parse(i.function.arguments)}))}}}function V(r,e){return new ue(r,e)}class C{constructor(e,t){this.memories=[],this.name=e,this.config=t}async addMemory(e){this.memories.push({...e,timestamp:new Date}),this.memories.length>100&&(this.memories=this.memories.slice(-100))}async getMemories(e,t=2){if(this.memories.length===0)return[];const s=this.memories.map(n=>{const o=this.calculateSimilarity(e,n.situation);return{memory:n,score:o}});return s.sort((n,o)=>o.score-n.score),s.slice(0,t).map(n=>n.memory)}calculateSimilarity(e,t){const s=this.tokenize(e),n=this.tokenize(t),o=s.filter(l=>n.includes(l)),i=new Set([...s,...n]);return o.length/i.size}tokenize(e){return e.toLowerCase().replace(/[^\w\s]/g," ").split(/\s+/).filter(t=>t.length>3)}clear(){this.memories=[]}getAllMemories(){return[...this.memories]}getMemoryCount(){return this.memories.length}}async function me(r,e,t){try{const s=await ut.yfinance.getHistoricalData({symbol:r,period1:e,period2:t,interval:"1d"});if(!s.success||!s.data)throw new Error(`Failed to fetch stock data for ${r}`);return s.data.map(n=>({date:n.date,open:n.open,high:n.high,low:n.low,close:n.close,volume:n.volume}))}catch(s){throw console.error("Error fetching stock data:",s),s}}async function pe(r,e){const t={},s=r.map(l=>l.close),n=r.map(l=>l.high),o=r.map(l=>l.low),i=r.map(l=>l.volume);for(const l of e)switch(l.toLowerCase()){case"close_50_sma":case"sma50":t.sma50=H(s,50);break;case"close_200_sma":case"sma200":t.sma200=H(s,200);break;case"close_10_ema":case"ema10":t.ema10=U(s,10);break;case"rsi":t.rsi=da(s,14);break;case"macd":const c=ua(s);t.macd=c.macd,t.macdSignal=c.signal,t.macdHistogram=c.histogram;break;case"boll":case"bollinger":const d=ma(s,20,2);t.bollingerUpper=d.upper,t.bollingerMiddle=d.middle,t.bollingerLower=d.lower;break;case"atr":t.atr=pa(n,o,s,14);break;case"vwma":t.vwma=ya(s,i,20);break}return t}async function la(r){try{const e=await fetch(`/api/stocks/quote/${r}`);if(!e.ok)throw new Error("Failed to fetch fundamentals");const t=await e.json();return{marketCap:t.marketCap,peRatio:t.peRatio,dividendYield:t.dividendYield,eps:t.eps,revenue:t.revenue,profitMargin:t.profitMargin}}catch(e){throw console.error("Error fetching fundamentals:",e),e}}async function ca(r,e=10){try{return[]}catch(t){return console.error("Error fetching news:",t),[]}}function H(r,e){const t=[];for(let s=0;s<r.length;s++)if(s<e-1)t.push(NaN);else{const n=r.slice(s-e+1,s+1).reduce((o,i)=>o+i,0);t.push(n/e)}return t}function U(r,e){const t=[],s=2/(e+1);let n=r.slice(0,e).reduce((o,i)=>o+i,0)/e;t.push(...Array(e-1).fill(NaN)),t.push(n);for(let o=e;o<r.length;o++)n=(r[o]-n)*s+n,t.push(n);return t}function da(r,e=14){const t=[],s=[],n=[];for(let o=1;o<r.length;o++){const i=r[o]-r[o-1];s.push(i>0?i:0),n.push(i<0?Math.abs(i):0)}for(let o=0;o<s.length;o++)if(o<e-1)t.push(NaN);else{const i=s.slice(o-e+1,o+1).reduce((y,p)=>y+p,0)/e,l=n.slice(o-e+1,o+1).reduce((y,p)=>y+p,0)/e,d=100-100/(1+(l===0?100:i/l));t.push(d)}return t.unshift(NaN),t}function ua(r){const e=U(r,12),t=U(r,26),s=e.map((l,c)=>l-t[c]),n=U(s.filter(l=>!isNaN(l)),9),o=[...Array(s.length-n.length).fill(NaN),...n],i=s.map((l,c)=>l-o[c]);return{macd:s,signal:o,histogram:i}}function ma(r,e=20,t=2){const s=H(r,e),n=[],o=[];for(let i=0;i<r.length;i++)if(i<e-1)n.push(NaN),o.push(NaN);else{const l=r.slice(i-e+1,i+1),c=s[i],d=l.reduce((p,g)=>p+Math.pow(g-c,2),0)/e,y=Math.sqrt(d);n.push(c+t*y),o.push(c-t*y)}return{upper:n,middle:s,lower:o}}function pa(r,e,t,s=14){const n=[],o=[];for(let i=1;i<r.length;i++){const l=r[i]-e[i],c=Math.abs(r[i]-t[i-1]),d=Math.abs(e[i]-t[i-1]);o.push(Math.max(l,c,d))}n.push(NaN);for(let i=0;i<o.length;i++)if(i<s-1)n.push(NaN);else{const l=o.slice(i-s+1,i+1).reduce((c,d)=>c+d,0)/s;n.push(l)}return n}function ya(r,e,t=20){const s=[];for(let n=0;n<r.length;n++)if(n<t-1)s.push(NaN);else{const o=r.slice(n-t+1,n+1),i=e.slice(n-t+1,n+1),l=o.reduce((d,y,p)=>d+y*i[p],0),c=i.reduce((d,y)=>d+y,0);s.push(l/c)}return s}class ye{constructor(e){this.llm=e}async analyze(e){const{companyOfInterest:t,tradeDate:s}=e,n=`You are a trading assistant tasked with analyzing financial markets. Your role is to select the **most relevant indicators** for a given market condition or trading strategy from the following list. The goal is to choose up to **8 indicators** that provide complementary insights without redundancy.

Moving Averages:
- close_50_sma: 50 SMA: A medium-term trend indicator. Identify trend direction and support/resistance.
- close_200_sma: 200 SMA: A long-term trend benchmark. Confirm overall market trend and golden/death cross.
- close_10_ema: 10 EMA: A responsive short-term average. Capture quick momentum shifts.

MACD Related:
- macd: MACD: Momentum via EMA differences. Look for crossovers and divergence.
- macds: MACD Signal: EMA smoothing of MACD line. Use crossovers to trigger trades.
- macdh: MACD Histogram: Gap between MACD and signal. Visualize momentum strength.

Momentum Indicators:
- rsi: RSI: Measures overbought/oversold conditions using 70/30 thresholds.

Volatility Indicators:
- boll: Bollinger Middle: 20 SMA basis for Bollinger Bands.
- boll_ub: Bollinger Upper: 2 std devs above middle, signals overbought.
- boll_lb: Bollinger Lower: 2 std devs below middle, signals oversold.
- atr: ATR: Measures volatility for stop-loss and position sizing.

Volume-Based Indicators:
- vwma: VWMA: Volume-weighted moving average confirms trends.

Select indicators that provide diverse information and explain why they're suitable. Write a detailed report of trends observed.
Make sure to append a Markdown table at the end of the report to organize key points.

For your reference, the current date is ${s}. The company we want to analyze is ${t}.`;try{const o=new Date(s),i=new Date(o);i.setMonth(i.getMonth()-6);const l=await me(t,i,o),d=await pe(l,["close_50_sma","close_200_sma","close_10_ema","rsi","macd","boll","atr","vwma"]),y=l.slice(-20),p=`
Recent Price Action for ${t}:
${y.map(T=>`${T.date}: Close=$${T.close.toFixed(2)}, Volume=${T.volume}`).join(`
`)}

Technical Indicators (Latest Values):
- 50 SMA: ${d.sma50?.slice(-1)[0]?.toFixed(2)||"N/A"}
- 200 SMA: ${d.sma200?.slice(-1)[0]?.toFixed(2)||"N/A"}
- 10 EMA: ${d.ema10?.slice(-1)[0]?.toFixed(2)||"N/A"}
- RSI: ${d.rsi?.slice(-1)[0]?.toFixed(2)||"N/A"}
- MACD: ${d.macd?.slice(-1)[0]?.toFixed(2)||"N/A"}
- Bollinger Upper: ${d.bollingerUpper?.slice(-1)[0]?.toFixed(2)||"N/A"}
- Bollinger Middle: ${d.bollingerMiddle?.slice(-1)[0]?.toFixed(2)||"N/A"}
- Bollinger Lower: ${d.bollingerLower?.slice(-1)[0]?.toFixed(2)||"N/A"}
- ATR: ${d.atr?.slice(-1)[0]?.toFixed(2)||"N/A"}
- VWMA: ${d.vwma?.slice(-1)[0]?.toFixed(2)||"N/A"}

Please analyze these indicators and provide a comprehensive market analysis report.`,g=[{role:"system",content:n},{role:"user",content:p}],A=await this.llm.invoke(g);return{marketReport:A.content,messages:[...e.messages,{role:"assistant",content:A.content}],sender:"MarketAnalyst"}}catch(o){return console.error("Market Analyst error:",o),{marketReport:`Error analyzing market data for ${t}: ${o}`,sender:"MarketAnalyst"}}}}class ge{constructor(e,t){this.llm=e,this.memory=t}async analyze(e){const{investmentDebateState:t,marketReport:s,sentimentReport:n,newsReport:o,fundamentalsReport:i}=e,l=`${s}

${n}

${o}

${i}`,c=await this.memory.getMemories(l,2);let d="";c.length>0?d=c.map(T=>T.recommendation).join(`

`):d="No past memories found.";const y=`You are a Bull Analyst advocating for investing in the stock. Your task is to build a strong, evidence-based case emphasizing growth potential, competitive advantages, and positive market indicators. Leverage the provided research and data to address concerns and counter bearish arguments effectively.

Key points to focus on:
- Growth Potential: Highlight the company's market opportunities, revenue projections, and scalability.
- Competitive Advantages: Emphasize factors like unique products, strong branding, or dominant market positioning.
- Positive Indicators: Use financial health, industry trends, and recent positive news as evidence.
- Bear Counterpoints: Critically analyze the bear argument with specific data and sound reasoning, addressing concerns thoroughly and showing why the bull perspective holds stronger merit.
- Engagement: Present your argument in a conversational style, engaging directly with the bear analyst's points and debating effectively rather than just listing data.

Resources available:
Market research report: ${s}
Social media sentiment report: ${n}
Latest world affairs news: ${o}
Company fundamentals report: ${i}
Conversation history of the debate: ${t.history}
Last bear argument: ${t.currentResponse}
Reflections from similar situations and lessons learned: ${d}

Use this information to deliver a compelling bull argument, refute the bear's concerns, and engage in a dynamic debate that demonstrates the strengths of the bull position. You must also address reflections and learn from lessons and mistakes you made in the past.`,g=`Bull Analyst: ${(await this.llm.invoke(y)).content}`;return{investmentDebateState:{history:t.history+`
`+g,bullHistory:t.bullHistory+`
`+g,bearHistory:t.bearHistory,currentResponse:g,judgeDecision:t.judgeDecision,count:t.count+1}}}}class he{constructor(e,t){this.llm=e,this.memory=t}async analyze(e){const{investmentDebateState:t,marketReport:s,sentimentReport:n,newsReport:o,fundamentalsReport:i}=e,l=`${s}

${n}

${o}

${i}`,c=await this.memory.getMemories(l,2);let d="";c.length>0?d=c.map(T=>T.recommendation).join(`

`):d="No past memories found.";const y=`You are a Bear Analyst advocating for caution or avoiding investment in the stock. Your task is to build a strong, evidence-based case emphasizing risks, challenges, and negative market indicators. Use the provided research and data to highlight concerns and counter bullish arguments effectively.

Key points to focus on:
- Risk Factors: Identify market risks, competitive threats, regulatory challenges, or economic headwinds.
- Valuation Concerns: Point out if the stock is overvalued based on fundamentals or technical indicators.
- Negative Indicators: Use weak financial metrics, declining trends, or negative news as evidence.
- Bull Counterpoints: Critically analyze the bull argument with specific data and reasoning, showing why the bear perspective is more prudent.
- Engagement: Present your argument conversationally, directly engaging with the bull analyst's points.

Resources available:
Market research report: ${s}
Social media sentiment report: ${n}
Latest world affairs news: ${o}
Company fundamentals report: ${i}
Conversation history of the debate: ${t.history}
Last bull argument: ${t.currentResponse}
Reflections from similar situations and lessons learned: ${d}

Use this information to deliver a compelling bear argument, highlight risks, and engage in a dynamic debate. Learn from past mistakes reflected in the memories provided.`,g=`Bear Analyst: ${(await this.llm.invoke(y)).content}`;return{investmentDebateState:{history:t.history+`
`+g,bullHistory:t.bullHistory,bearHistory:t.bearHistory+`
`+g,currentResponse:g,judgeDecision:t.judgeDecision,count:t.count+1}}}}class fe{constructor(e,t){this.llm=e,this.memory=t}async makeDecision(e){const{investmentDebateState:t,companyOfInterest:s}=e,n=`You are an Investment Judge tasked with evaluating the debate between a Bull Analyst and a Bear Analyst regarding ${s}.

Review the complete debate history:
${t.history}

Based on the arguments presented by both sides:
1. Evaluate the strength of each argument
2. Consider the evidence provided
3. Assess the risks and opportunities
4. Make a final decision: Should we INVEST or NOT INVEST?

Provide your reasoning and conclude with a clear decision: "FINAL DECISION: INVEST" or "FINAL DECISION: NOT INVEST"`,o=await this.llm.invoke(n),i=o.content.includes("INVEST")&&!o.content.includes("NOT INVEST")?"INVEST":"NOT INVEST";return{investmentDebateState:{...t,judgeDecision:o.content},investmentPlan:i==="INVEST"?"Proceed with investment based on bull arguments":"Avoid investment due to bear concerns"}}}class we{constructor(e,t){this.llm=e,this.memory=t}async makeDecision(e){const{companyOfInterest:t,investmentPlan:s,marketReport:n,sentimentReport:o,newsReport:i,fundamentalsReport:l}=e,c=`${n}

${o}

${i}

${l}`,d=await this.memory.getMemories(c,2);let y="";d.length>0?y=d.map(A=>A.recommendation).join(`

`):y="No past memories found.";const p=[{role:"system",content:`You are a trading agent analyzing market data to make investment decisions. Based on your analysis, provide a specific recommendation to buy, sell, or hold. End with a firm decision and always conclude your response with 'FINAL TRANSACTION PROPOSAL: **BUY/HOLD/SELL**' to confirm your recommendation.

Do not forget to utilize lessons from past decisions to learn from your mistakes. Here is some reflections from similar situations you traded in and the lessons learned:

${y}`},{role:"user",content:`Based on a comprehensive analysis by a team of analysts, here is an investment plan tailored for ${t}. This plan incorporates insights from current technical market trends, macroeconomic indicators, and social media sentiment. Use this plan as a foundation for evaluating your next trading decision.

Proposed Investment Plan: ${s}

Leverage these insights to make an informed and strategic decision.`}],g=await this.llm.invoke(p);return{traderInvestmentPlan:g.content,messages:[...e.messages,{role:"assistant",content:g.content}],sender:"Trader"}}}const ga={llmProvider:"groq",deepThinkLLM:"llama3-70b-8192",quickThinkLLM:"llama3-8b-8192",temperature:.3,projectDir:"./data",apiKeys:{groq:process.env.GROQ_API_KEY||""}};class ha{constructor(e=["market","social","news","fundamentals"],t=!1,s){this.currentState=null,this.ticker=null,this.logStatesDict={},this.selectedAnalysts=e,this.debug=t,this.config={...ga,...s},this.deepThinkingLLM=V(this.config,this.config.deepThinkLLM),this.quickThinkingLLM=V(this.config,this.config.quickThinkLLM),this.bullMemory=new C("bull_memory",this.config),this.bearMemory=new C("bear_memory",this.config),this.traderMemory=new C("trader_memory",this.config),this.investJudgeMemory=new C("invest_judge_memory",this.config),this.riskManagerMemory=new C("risk_manager_memory",this.config),this.marketAnalyst=new ye(this.deepThinkingLLM),this.bullResearcher=new ge(this.deepThinkingLLM,this.bullMemory),this.bearResearcher=new he(this.deepThinkingLLM,this.bearMemory),this.investmentJudge=new fe(this.quickThinkingLLM,this.investJudgeMemory),this.trader=new we(this.quickThinkingLLM,this.traderMemory)}async propagate(e,t){this.ticker=e;const s=this.createInitialState(e,t);this.debug&&console.log(`
=== Starting Analysis for ${e} on ${t} ===
`);let n=s;if(this.selectedAnalysts.includes("market")){this.debug&&console.log("Running Market Analyst...");const d=await this.marketAnalyst.analyze(n);n={...n,...d}}n.sentimentReport||(n.sentimentReport="No social media analysis performed."),n.newsReport||(n.newsReport="No news analysis performed."),n.fundamentalsReport||(n.fundamentalsReport="No fundamentals analysis performed."),this.debug&&console.log(`
=== Investment Debate ===`),n.investmentDebateState={bullHistory:"",bearHistory:"",history:"",currentResponse:"",judgeDecision:"",count:0};for(let d=0;d<3;d++){this.debug&&console.log(`
Debate Round ${d+1}`);const y=await this.bullResearcher.analyze(n);n={...n,...y};const p=await this.bearResearcher.analyze(n);n={...n,...p}}this.debug&&console.log(`
Investment Judge making decision...`);const o=await this.investmentJudge.makeDecision(n);n={...n,...o},this.debug&&console.log(`
Trader making final decision...`);const i=await this.trader.makeDecision(n);n={...n,...i};const l=this.extractDecision(n.traderInvestmentPlan||"");n.finalTradeDecision=l,this.currentState=n,this.logState(t,n);const c=this.processSignal(l);return this.debug&&console.log(`
=== Final Decision: ${c.action} (Confidence: ${c.confidence}) ===
`),{state:n,signal:c}}createInitialState(e,t){return{companyOfInterest:e,tradeDate:t,messages:[],sender:"",marketReport:"",sentimentReport:"",newsReport:"",fundamentalsReport:"",investmentDebateState:{bullHistory:"",bearHistory:"",history:"",currentResponse:"",judgeDecision:"",count:0},investmentPlan:"",traderInvestmentPlan:"",riskDebateState:{riskyHistory:"",safeHistory:"",neutralHistory:"",history:"",latestSpeaker:"",currentRiskyResponse:"",currentSafeResponse:"",currentNeutralResponse:"",judgeDecision:"",count:0},finalTradeDecision:""}}extractDecision(e){const t=e.toUpperCase();return t.includes("BUY")&&!t.includes("NOT BUY")?"BUY":t.includes("SELL")&&!t.includes("NOT SELL")?"SELL":"HOLD"}processSignal(e){return{action:e,confidence:.75,reasoning:"Based on multi-agent analysis and debate",timestamp:new Date}}logState(e,t){this.logStatesDict[e]={companyOfInterest:t.companyOfInterest,tradeDate:t.tradeDate,marketReport:t.marketReport,sentimentReport:t.sentimentReport,newsReport:t.newsReport,fundamentalsReport:t.fundamentalsReport,investmentDebateState:{bullHistory:t.investmentDebateState.bullHistory,bearHistory:t.investmentDebateState.bearHistory,history:t.investmentDebateState.history,currentResponse:t.investmentDebateState.currentResponse,judgeDecision:t.investmentDebateState.judgeDecision},traderInvestmentDecision:t.traderInvestmentPlan,finalTradeDecision:t.finalTradeDecision}}async reflectAndRemember(e){if(!this.currentState)return;const t=`${this.currentState.marketReport}
${this.currentState.newsReport}`,s=this.currentState.finalTradeDecision,n=`Decision: ${s}, Outcome: ${e>0?"Positive":"Negative"} (${e.toFixed(2)}%)`,o={situation:t,decision:s,outcome:e,recommendation:n,timestamp:new Date};await this.bullMemory.addMemory(o),await this.bearMemory.addMemory(o),await this.traderMemory.addMemory(o),await this.investJudgeMemory.addMemory(o)}getLogStates(){return this.logStatesDict}getCurrentState(){return this.currentState}}const F=mt.join(process.cwd(),"lib/algo-stategies/algo-strategies.json");function fa(){if(!K.existsSync(F))return{};try{const r=JSON.parse(K.readFileSync(F,"utf8")),e={};return Array.isArray(r)&&r.forEach(t=>{t.url&&(e[t.url]=t)}),e}catch{return{}}}async function wa(r=1,e=""){const t=e?`&sort=${e}`:"",s=r===1?`https://www.tradingview.com/scripts/?component-data-only=1&script_type=strategies${t}`:`https://www.tradingview.com/scripts/page-${r}/?component-data-only=1&script_type=strategies${t}`;return((await I.get(s,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0 Safari/537.36","Accept-Language":"en-US,en;q=0.9",Accept:"application/json"}})).data?.data?.ideas?.data?.items||[]).map(c=>{const d=c.user?.username||null,y=c.chart_url||`https://www.tradingview.com/script/${c.image_url}/`,p=c.likes_count||0;c.comments_count;const g=c.image_url||null;return c.symbol&&(c.symbol.short_name,c.symbol.exchange,c.symbol.logo_urls&&c.symbol.logo_urls[0]),{url:y.split("script/")[1].replace(/\/$/,""),name:c.name||null,description:c.description||null,image_url:g,author:d,likes:p,type:c.script_type||null}})}async function ka(r,e){if(e[r.url]&&e[r.url].source)return console.log(`Using cached data for ${r.url}`),e[r.url];try{const t=`https://www.tradingview.com/script/${r.url}`,o=(await I.get(t,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0 Safari/537.36","Accept-Language":"en-US,en;q=0.9"}})).data.match(/"script_id_part"\s*:\s*"([^"]+)"(?:[^}]+?"version_maj"\s*:\s*(\d+))?/);if(!o)return console.log(`No script_id_part found for ${r.url}`),r;const i=o[1],l=o[2]?Number(o[2]):3,d=`https://pine-facade.tradingview.com/pine-facade/get/${encodeURIComponent(i)}/${l}?no_4xx=true`;console.log(`Fetching pine-facade for ${r.url} -> ${i} (version_maj=${l})`);const p=(await I.get(d,{headers:{"User-Agent":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/122.0 Safari/537.36","Accept-Language":"en-US,en;q=0.9"}})).data;let{created:g,updated:A,source:T}=p;g=new Date(g).toISOString().split("T")[0],A=new Date(A).toISOString().split("T")[0];const m={...r,updated:A,source:T};return e[r.url]=m,console.log(`Enriched ${r.url}`),m}catch(t){return console.log(`Error enriching ${r.url}: ${t.message}`),r}}async function va(){const r=fa(),e=process.argv.slice(2),t=e.find(p=>p.startsWith("--sort=")),s=t?t.split("=")[1]:"",n=s==="recent"?"recent_extended":s,o=e.find(p=>p.startsWith("--pages=")),i=o?parseInt(o.split("=")[1],10):1,l=Array.from({length:i},(p,g)=>g+1),c=[];console.log(`Fetching TradingView scripts${n?` (sorted by: ${n})`:""}...`);for(const p of l){console.log(`Fetching page ${p}...`);const g=await wa(p,n);c.push(...g)}console.log(`
Enriching ${c.length} scripts with Pine Script source code...
`);const d=[];for(const p of c){const g=await ka(p,r);d.push(g),r[g.url]=g}K.writeFileSync(F,JSON.stringify(d,null,2),"utf8"),console.log(`
Done! Total items: ${d.length}`),console.log(`Output saved to: ${F}`);const y=d.filter(p=>p.source).length;console.log(`Scripts with source code: ${y}/${d.length}`)}va().catch(r=>{console.error(r),process.exit(1)});function ba(r){return new pt({keyId:r.keyId,secretKey:r.secretKey,paper:r.paper??!0})}const _a=process.env.NEXT_PUBLIC_ALPACA_MCP_URL||"http://localhost:3001";class ke{constructor(e){this.baseURL=e?.baseURL||_a,this.apiKey=e?.apiKey,this.apiSecret=e?.apiSecret}async callTool(e,t={}){const s=await fetch(`${this.baseURL}/mcp/call`,{method:"POST",headers:{"Content-Type":"application/json",...this.apiKey&&{"X-API-Key":this.apiKey},...this.apiSecret&&{"X-API-Secret":this.apiSecret}},body:JSON.stringify({tool:e,arguments:t})});if(!s.ok){const o=await s.json().catch(()=>({error:"Unknown error"}));throw new Error(o.error||`MCP call failed: ${s.statusText}`)}const n=await s.json();if(!n.success)throw new Error(n.error||"Tool call failed");return n.data}async getAccount(){return this.callTool("get_account",{})}async getPositions(){return this.callTool("get_all_positions",{})}async getPosition(e){return this.callTool("get_position",{symbol:e})}async getPortfolioHistory(e){return this.callTool("get_portfolio_history",e||{})}async placeOrder(e){return this.callTool("place_order",e)}async getOrders(e){return this.callTool("get_orders",e||{})}async getOrder(e){return this.callTool("get_order",{order_id:e})}async cancelOrder(e){return this.callTool("cancel_order",{order_id:e})}async closePosition(e,t){return this.callTool("close_position",{symbol:e,...t&&{qty:t}})}async closeAllPositions(){return this.callTool("close_all_positions",{})}async getQuote(e){return this.callTool("get_latest_quote",{symbol:e})}async getBars(e){return this.callTool("get_bars",e)}async getLatestBar(e){return this.callTool("get_latest_bar",{symbol:e})}async getSnapshot(e){return this.callTool("get_snapshot",{symbol:e})}async searchAssets(e){return this.callTool("search_assets",e||{})}async getOptionChain(e){return this.callTool("get_option_chain",e)}async placeOptionOrder(e){return this.callTool("place_option_order",e)}async getCryptoBars(e){return this.callTool("get_crypto_bars",e)}async getCryptoQuote(e){return this.callTool("get_latest_crypto_quote",{symbol:e})}async placeCryptoOrder(e){return this.callTool("place_crypto_order",e)}async getWatchlists(){return this.callTool("get_watchlists",{})}async createWatchlist(e,t){return this.callTool("create_watchlist",{name:e,symbols:t})}async addToWatchlist(e,t){return this.callTool("add_to_watchlist",{watchlist_id:e,symbol:t})}async deleteWatchlist(e){return this.callTool("delete_watchlist",{watchlist_id:e})}async getMarketCalendar(e){return this.callTool("get_market_calendar",e||{})}async getCorporateActions(e){return this.callTool("get_corporate_actions",e)}async chatWithAI(e){try{const t=await fetch("/api/alpaca/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:e})});if(!t.ok)throw new Error(`Chat API error: ${t.statusText}`);const s=await t.json();return{role:"assistant",content:s.content,timestamp:new Date(s.timestamp),suggestions:s.suggestions||[]}}catch(t){return console.error("Chat error:",t),{role:"assistant",content:`Sorry, I encountered an error: ${t.message}

Please try again or check your GROQ API key configuration.`,timestamp:new Date,suggestions:["What is a momentum trading strategy?","How do I set stop loss and take profit?","Explain technical indicators for trading"]}}}async generateStrategyFromDescription(e){return{name:"AI Generated Strategy",description:e,symbols:["AAPL","MSFT","GOOGL"],active:!1,rules:[{id:"1",type:"entry",condition:{indicator:"price",operator:"crosses_above",value:"sma_20",timeframe:"1D"},action:{type:"buy",orderType:"market"}},{id:"2",type:"exit",condition:{indicator:"price",operator:"crosses_below",value:"sma_20",timeframe:"1D"},action:{type:"sell",orderType:"market"}}],riskManagement:{maxPositionSize:10,stopLoss:5,takeProfit:15,maxDailyLoss:2,trailingStop:3},createdAt:new Date().toISOString()}}}const q=new ke;async function Aa(){return q.getAccount()}async function Ta(r){return q.placeOrder(r)}async function Sa(r){return q.getQuote(r)}async function Pa(r){return q.chatWithAI(r)}const Na="/api",ve={sp500Top:["AAPL","MSFT","NVDA","GOOGL","AMZN","META","TSLA","BRK.B","LLY","V"],tech:["AAPL","MSFT","NVDA","GOOGL","META","TSLA","ORCL","CRM","ADBE","NFLX"],faang:["META","AAPL","AMZN","NFLX","GOOGL"],mag7:["AAPL","MSFT","NVDA","GOOGL","AMZN","META","TSLA"],mostActive:["TSLA","NVDA","AAPL","AMD","PLTR","SOFI","F","NIO","LCID","RIVN"]};class be{constructor(e=Na){this.baseURL=e}async fetchAPI(e,t={}){const s=`${this.baseURL}${e}`,n=await fetch(s,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!n.ok){const o=await n.json().catch(()=>({detail:"Unknown error"}));throw new Error(o.detail||`API error: ${n.statusText}`)}return n.json()}async getHealth(){const e=await this.fetchAPI("/trading-agents");return{status:"online",timestamp:new Date().toISOString(),services:{news_researcher:"online",debate_analyst:"online"},...e}}async getAgentLogs(e=50){return this.fetchAPI(`/trading-agents?action=history&limit=${e}`)}async analyzeWithNewsResearcher(e){const t=e.symbols[0],s=await this.fetchAPI("/trading-agents",{method:"POST",body:JSON.stringify({symbol:t,date:e.date,analysts:["news","fundamentals","market"]})});return{success:s.success,symbols:[s.symbol],date:s.date,timestamp:new Date().toISOString(),result:{portfolio_manager_results:{decision:s.signal.action,confidence:s.signal.confidence,reasoning:s.signal.reasoning},news_intelligence_results:{summary:s.analysis.newsReport},technical_analysis_results:{summary:s.analysis.marketReport},data_collection_results:{summary:s.analysis.fundamentalsReport}}}}async batchAnalyzeWithNewsResearcher(e){throw new Error("Batch analysis not supported in this version")}async analyzeWithDebateAnalyst(e){const t=await this.fetchAPI("/trading-agents",{method:"POST",body:JSON.stringify({symbol:e.symbol,date:e.date,config:{deepThinkLLM:e.deep_think_llm,quickThinkLLM:e.quick_think_llm}})});return{success:t.success,symbol:t.symbol,date:t.date,timestamp:new Date().toISOString(),decision:{action:t.signal.action,confidence:t.signal.confidence,position_size:1,reasoning:t.signal.reasoning,debate_summary:t.analysis.investmentDebate?{bull_arguments:[t.analysis.investmentDebate.bullArguments],bear_arguments:[t.analysis.investmentDebate.bearArguments],risk_assessment:"See full analysis for risk details"}:void 0}}}async reflectOnTrade(e){return{success:!0}}async getDebateAnalystConfig(){return{success:!0}}async runBacktest(e){const t=await this.fetchAPI("/backtest",{method:"POST",body:JSON.stringify({symbol:e.symbol,startDate:"2023-01-01",endDate:new Date().toISOString().split("T")[0],strategy:"momentum"})});return{success:t.success,symbol:t.symbol,timestamp:new Date().toISOString(),primo_results:{"Starting Portfolio Value [$]":t.initialCapital,"Final Portfolio Value [$]":t.finalValue,"Cumulative Return [%]":t.totalReturnPercent,"Annual Return [%]":0,"Annual Volatility [%]":0,"Sharpe Ratio":t.metrics.sharpeRatio||0,"Max Drawdown [%]":t.metrics.maxDrawdown,"Total Trades":t.metrics.totalTrades,"Win Rate [%]":t.metrics.winRate},buyhold_results:{"Cumulative Return [%]":0,"Annual Return [%]":0,"Sharpe Ratio":0,"Max Drawdown [%]":0},comparison:{relative_return:0,outperformed:t.totalReturn>0,metrics:{cumulative_return_diff:0,volatility_diff:0,max_drawdown_diff:0,sharpe_diff:0}}}}async getAvailableStocks(e="./output/csv"){return{success:!0,files:[]}}async analyzeTopStocks(e="mag7",t="news-researcher"){const s=ve[e];return t==="news-researcher"?await Promise.allSettled(s.map(o=>this.analyzeWithNewsResearcher({symbols:[o]}))):await Promise.allSettled(s.map(o=>this.analyzeWithDebateAnalyst({symbol:o})))}async batchBacktest(e){return await Promise.allSettled(e.map(s=>this.runBacktest({symbol:s})))}}const R=new be;async function xa(r,e="debate-analyst"){return e==="news-researcher"?R.analyzeWithNewsResearcher({symbols:[r]}):R.analyzeWithDebateAnalyst({symbol:r})}async function Da(r="mag7",e="news-researcher"){return R.analyzeTopStocks(r,e)}async function La(r){return R.runBacktest({symbol:r})}async function Ma(){return R.getHealth()}const Ca={health:["health"],newsResearcher:r=>["news-researcher",...r],debateAnalyst:r=>["debate-analyst",r],backtest:r=>["backtest",r],availableStocks:["available-stocks"],topStocks:(r,e)=>["top-stocks",r,e]},Ia="./data/leaders.json";class Ra{constructor(){this.getTraderRankings=async(e="1mo")=>(await this.api("/market/ranks",{time:e,engines:["stocks"]}))?.data?.data.map(t=>({id:t.id,name:t.name,rank:t.rank,rep:t.rep,trades:t.trades,winRate:Math.floor(t.winRate),totalGain:Math.floor(t.totalGain),avgReturn:Math.floor(t.avgReturn)})),this.getTraderTrades=async(e,t="1mo")=>(await this.api("/accounts/trades",{id:e,filter:{frame:t,engines:["options","stocks","crypto","forex"]}}))?.data?.data.map(s=>(te.log(s),{symbol:s.symbol,type:s.type=="short"?"short":s.closed?"sell":"buy",time:new Date(s.lastModified).toISOString(),price:Number(s.price.toFixed(2)),...(s.type=="short"||s.closed)&&{previousPrice:Number(s.previousEntryPrice.toFixed(2))},...s.closed&&{gain:Math.floor(s.gain)}})),this.api=te.grab.instance({baseURL:"https://db.nvstly.com/api",post:!0,compress:!1})}}const J=new Ra;async function $a(){const r=await J.getTraderRankings();r.forEach(e=>{}),console.log(`Found ${r.length} traders`);for(let e=0;e<r.length;e++){const s=r[e].id;r[e].orders=await J.getTraderTrades(s),console.log(`  Added ${r[e].orders.length} trades for ${r[e].name}`),await yt.writeFile(Ia,JSON.stringify(r,null,2)),r[e].orders[2],await new Promise(n=>setTimeout(n,1e3))}}$a();async function _e(){const r=await fetch("https://www.zulutrade.com/zulutrade-gateway/api/providers/performance/topTraders/75932/search?flavorId=1&accessingFlavorId=1",{headers:{accept:"application/json, text/plain, */*","accept-language":"en-US,en;q=0.9","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"}});if(!r.ok)throw new Error(`Zulu fetch failed: ${r.status}`);return(await r.json()).result||[]}async function Ae(r){const e=await fetch(`https://www.zulutrade.com/zulutrade-gateway/v2/api/providers/${r}/thi/init?accessingFlavorId=1&flavor=global`,{headers:{accept:"application/json","accept-language":"en-US,en;q=0.9","content-type":"application/json","sec-fetch-dest":"empty","sec-fetch-mode":"cors","sec-fetch-site":"same-origin"}});if(!e.ok)throw new Error(`Zulu trader detail fetch failed: ${e.status}`);return await e.json()}async function Y(r){const e=Date.now();for(const t of r){const s=t.trader,n=s.profile,o=s.overallStats,i=o.timeframeStats||{},l=Object.values(i)[0]||{};await h.db.insert(u.zuluTraders).values({providerId:s.providerId,name:n.name,strategyDesc:n.strategyDesc||null,countryCode:n.countryIsoCode,countryName:n.countryName,brokerName:n.brokerName,balance:o.balance||0,equity:o.equity||0,followers:o.followers||0,liveFollowers:o.liveFollowers||0,roiAnnualized:o.roiAnnualized||0,roiProfit:o.roiProfit||0,zuluRank:o.zuluRank||0,bestTrade:o.bestTrade||0,worstTrade:o.worstTrade||0,profitableTrades:o.profitableTrades||0,losingTrades:o.losingTrades||0,avgDrawdown:o.avgDrawdown||0,maxDrawdown:o.overallDrawDownInMoney||0,maxDrawdownPercent:l.maxDrawDownPercent||0,leverage:n.leverage||0,isEa:s.badges?.ea?1:0,currencies:o.providerCurrencies||"",weeks:o.weeks||0,demo:n.demo?1:0,avgTradeSeconds:l.avgTradeSeconds||0,avgPnlPerTrade:l.avgPnlPerTrade||0,winRate:l.winTrades||0,totalTrades:l.trades||0,pageVisits:n.pageVisits||0,includedInWatchlist:o.includedInWatchlist||0,registrationDate:n.registrationDate?new Date(n.registrationDate):null,lastOpenTradeDate:o.lastOpenTradeDate?new Date(o.lastOpenTradeDate):null,updatedAt:new Date(e)}).onConflictDoUpdate({target:u.zuluTraders.providerId,set:{name:n.name,strategyDesc:n.strategyDesc||null,countryCode:n.countryIsoCode,countryName:n.countryName,brokerName:n.brokerName,balance:o.balance||0,equity:o.equity||0,followers:o.followers||0,liveFollowers:o.liveFollowers||0,roiAnnualized:o.roiAnnualized||0,roiProfit:o.roiProfit||0,zuluRank:o.zuluRank||0,bestTrade:o.bestTrade||0,worstTrade:o.worstTrade||0,profitableTrades:o.profitableTrades||0,losingTrades:o.losingTrades||0,avgDrawdown:o.avgDrawdown||0,maxDrawdown:o.overallDrawDownInMoney||0,maxDrawdownPercent:l.maxDrawDownPercent||0,leverage:n.leverage||0,isEa:s.badges?.ea?1:0,currencies:o.providerCurrencies||"",weeks:o.weeks||0,demo:n.demo?1:0,avgTradeSeconds:l.avgTradeSeconds||0,avgPnlPerTrade:l.avgPnlPerTrade||0,winRate:l.winTrades||0,totalTrades:l.trades||0,pageVisits:n.pageVisits||0,includedInWatchlist:o.includedInWatchlist||0,registrationDate:n.registrationDate?new Date(n.registrationDate):null,lastOpenTradeDate:o.lastOpenTradeDate?new Date(o.lastOpenTradeDate):null,updatedAt:new Date(e)}}),s.currencyStats&&s.currencyStats.length>0&&await Te(s.providerId,s.currencyStats)}}async function Te(r,e){const t=Date.now();for(const s of e){const n=`${r}-${s.currencyName}`;await h.db.insert(u.zuluCurrencyStats).values({id:n,providerId:r,currencyName:s.currencyName,totalCount:s.totalCurrencyCount||0,winCount:s.currencyWinCount||0,winPercent:s.currencyWinPercent||0,totalBuyCount:s.totalCurrencyBuyCount||0,totalSellCount:s.totalCurrencySellCount||0,pips:s.pips||0,createdAt:new Date(t)}).onConflictDoUpdate({target:u.zuluCurrencyStats.id,set:{totalCount:s.totalCurrencyCount||0,winCount:s.currencyWinCount||0,winPercent:s.currencyWinPercent||0,totalBuyCount:s.totalCurrencyBuyCount||0,totalSellCount:s.totalCurrencySellCount||0,pips:s.pips||0}})}}async function Oa(r=50){return await h.db.select().from(u.zuluTraders).orderBy(_.desc(u.zuluTraders.roiAnnualized)).limit(r)}async function Ea(r){const e=await h.db.select().from(u.zuluTraders).where(_.eq(u.zuluTraders.providerId,r)).limit(1);if(e.length===0)return null;const t=await h.db.select().from(u.zuluCurrencyStats).where(_.eq(u.zuluCurrencyStats.providerId,r));return{...e[0],currencyStats:t}}async function qa(r=50){return await h.db.select().from(u.zuluTraders).orderBy(_.asc(u.zuluTraders.zuluRank)).limit(r)}async function za(r){let e=h.db.select().from(u.zuluTraders);return r.minRoi&&(e=e.where(_.sql`${u.zuluTraders.roiAnnualized} >= ${r.minRoi}`)),r.minWinRate&&(e=e.where(_.sql`${u.zuluTraders.winRate} >= ${r.minWinRate}`)),r.maxDrawdown&&(e=e.where(_.sql`${u.zuluTraders.maxDrawdownPercent} <= ${r.maxDrawdown}`)),r.isEa!==void 0&&(e=e.where(_.eq(u.zuluTraders.isEa,r.isEa?1:0))),await e.orderBy(_.desc(u.zuluTraders.roiAnnualized)).limit(r.limit||50)}async function Ua(){console.log("Starting Zulu sync...");const r=await _e();return await Y(r),console.log(`Saved ${r.length} Zulu traders`),{traders:r.length}}async function Fa(r){console.log(`Syncing details for ${r.length} traders...`);const e=[];for(const t of r)try{const s=await Ae(t);e.push(s),await new Promise(n=>setTimeout(n,500))}catch(s){console.error(`Failed to fetch trader ${t}:`,s.message)}return e.length>0&&await Y(e.map(t=>({trader:t.trader.stats}))),console.log(`Saved ${e.length} trader details`),{details:e.length}}const Ba=new gt.TavilyClient({apiKey:process.env.TAVILY_API_KEY});async function Se(r){const e=await Ba.search({query:r,searchDepth:"advanced",maxResults:5,includeRawContent:!0,topic:"general"}),t=[];if(e?.answer&&t.push(`High-level answer: ${e.answer}`),e?.results?.length)for(const s of e.results.slice(0,3)){const n=(s.rawContent??s.content??"").slice(0,800);t.push(`Source: ${s.url}
Relevance: ${s.score}
Snippet:
${n}`)}return t.join(`

`)}function Pe(r,e,t){const s=`You are an expert analyst tasked with providing a balanced debate analysis for a prediction market question.

Market Question: ${r.question}
${r.description?`Description: ${r.description}`:""}

Current Polymarket displayed odds:
- YES: ${r.currentYesPrice}
- NO: ${r.currentNoPrice}

Note: These displayed odds are a UI placeholder and do NOT necessarily reflect true market probabilities. Use them only as a reference for comparison, not as ground truth. [web:89][web:92][web:96]

${r.volume24hr?`24h Volume: $${r.volume24hr.toLocaleString()}`:""}
${r.volumeTotal?`Total Volume: $${r.volumeTotal.toLocaleString()}`:""}

You have the following external research about this question from web search (via Tavily). Use it heavily for factual grounding:

${e}

Your tasks:
1. Infer your own best-estimate probability for YES and NO based on the research, expressed as numbers between 0 and 1 that sum to 1.0.
2. Provide a full debate analysis (arguments, summaries, key factors, uncertainties).
3. Explain how and why your inferred probabilities differ from the displayed 50/50 odds.

Respond with valid JSON in this format:

{
  "yesArguments": ["argument 1", "argument 2", "argument 3"],
  "noArguments": ["argument 1", "argument 2", "argument 3"],
  "yesSummary": "2-3 sentence summary of the strongest case for YES",
  "noSummary": "2-3 sentence summary of the strongest case for NO",
  "keyFactors": ["factor 1", "factor 2", "factor 3"],
  "uncertainties": ["uncertainty 1", "uncertainty 2"],
  "modelYesProbability": 0.63,
  "modelNoProbability": 0.37,
  "commentaryOnDiscrepancy": "2-4 sentences explaining why your inferred odds differ from the 50/50 displayed odds."
}

Guidelines:
1. Be intellectually honest and balanced - present the strongest arguments for BOTH sides.
2. Base arguments primarily on the provided research, plus relevant facts, data, historical precedent, and logical reasoning. [web:85][web:87][web:90]
3. Explicitly justify your probability estimates using the research (e.g., base rates, polls, fundamentals, historical analogies).
4. Highlight structural reasons the displayed 50/50 odds might deviate from true odds (e.g., low liquidity, retail bias, information lags). [web:89][web:92][web:94][web:99]
5. Each argument should be specific and substantive (2-3 sentences).
6. Key factors should be concrete, measurable events or conditions.
7. Focus on factors that are actually relevant to the prediction timeframe.
8. Avoid simply repeating the 50/50 odds; your probabilities should reflect your best judgment based on the research, even if far from 50/50.

`;return t?s+`
Return ONLY the JSON object, with no additional text or explanation.`:s}async function Ne(r,e,{model:t="llama-3.3-70b-versatile",temperature:s=.7}={}){const o=await new ht.ChatGroq({apiKey:e||process.env.GROQ_API_KEY,model:t,temperature:s}).invoke([{role:"system",content:"You are an expert analyst who provides balanced, fact-based debate analysis. Always respond with valid JSON matching the requested schema."},{role:"user",content:r}],{response_format:{type:"json_object"}});let l=(typeof o.content=="string"?o.content:Array.isArray(o.content)?o.content.map(d=>d?.text??"").join(""):String(o.content)).trim();const c=JSON.parse(l);if(!c.yesArguments||!c.noArguments||!c.yesSummary||!c.noSummary||!c.keyFactors||!c.uncertainties)throw new Error("Missing required fields in analysis");return c}async function ja(r,e){const t=await Se(r.question),s=Pe(r,t,!0);return Ne(s,e)}async function Wa(r,e){const t=await Se(r.question),s=Pe(r,t,!1);return Ne(s,e)}async function xe(r=50,e="volume24hr"){const t="https://gamma-api.polymarket.com",s=new URL(`${t}/markets`);s.searchParams.set("closed","false"),s.searchParams.set("active","true"),s.searchParams.set("limit",String(r)),s.searchParams.set("order",e),s.searchParams.set("ascending","false");const n=await fetch(s,{headers:{accept:"application/json"},cache:"no-store"});if(!n.ok)throw new Error(`markets fetch failed: ${n.status}`);return await n.json()}async function De(r={}){const{timePeriod:e="all",orderBy:t="VOL",limit:s=20,offset:n=0,category:o="overall"}=r,i=new URL("https://data-api.polymarket.com/v1/leaderboard");i.searchParams.set("timePeriod",e),i.searchParams.set("orderBy",t),i.searchParams.set("limit",String(s)),i.searchParams.set("offset",String(n)),i.searchParams.set("category",o);const l=await fetch(i,{headers:{accept:"application/json"},cache:"no-store"});if(!l.ok)throw new Error(`leaderboard fetch failed: ${l.status}`);return await l.json()}async function Le(r=50){const e=await fetch("https://polymarketanalytics.com/api/traders-tag-performance",{method:"POST",headers:{accept:"*/*","content-type":"application/json"},body:JSON.stringify({tag:"Overall",sortColumn:"overall_gain",sortDirection:"DESC",minPnL:-4534159552280787e-9,maxPnL:320323291229432e-8,minActivePositions:0,maxActivePositions:38642,minWinAmount:0,maxWinAmount:20316723043360095e-9,minLossAmount:-20494980369057264e-9,maxLossAmount:0,minWinRate:0,maxWinRate:100,minCurrentValue:0,maxCurrentValue:1e12,minTotalPositions:1,maxTotalPositions:56928})});if(!e.ok)throw new Error(`leaders fetch failed: ${e.status}`);const t=await e.json();let s=[];if(Array.isArray(t))s=t;else if(t&&Array.isArray(t.data))s=t.data;else return console.error("Polymarket API returned non-array:",JSON.stringify(t)),[];return s.slice(0,r)}async function Me(r){const e=await fetch("https://polymarketanalytics.com/api/traders-positions",{method:"POST",headers:{accept:"*/*","content-type":"application/json"},body:JSON.stringify({trader_id:r})});if(!e.ok)throw new Error(`positions fetch failed: ${e.status}`);return await e.json()}async function Ka(r){const e="https://gamma-api.polymarket.com",t=new URL(`${e}/markets/${r}/order-book`),s=await fetch(t,{headers:{accept:"application/json"},cache:"no-store"});return s.ok?await s.json():(console.error(`Order book fetch failed for market ${r}: ${s.status}`),null)}async function Va(r){const e="https://gamma-api.polymarket.com",t=new URL(`${e}/markets/${r}`),s=await fetch(t,{headers:{accept:"application/json"},cache:"no-store"});return s.ok?await s.json():(console.error(`Market details fetch failed for market ${r}: ${s.status}`),null)}async function Ce(r){const e=Date.now();for(const t of r)await h.db.insert(u.polymarketLeaders).values({trader:t.trader,overallGain:t.overall_gain||0,winRate:t.win_rate||0,activePositions:t.active_positions||0,totalPositions:t.total_positions||0,currentValue:t.current_value||0,winAmount:t.win_amount||0,lossAmount:t.loss_amount||0,updatedAt:new Date(e)}).onConflictDoUpdate({target:u.polymarketLeaders.trader,set:{overallGain:t.overall_gain||0,winRate:t.win_rate||0,activePositions:t.active_positions||0,totalPositions:t.total_positions||0,currentValue:t.current_value||0,winAmount:t.win_amount||0,lossAmount:t.loss_amount||0,updatedAt:new Date(e)}})}async function Ie(r){const e=Date.now();for(const t of r)await h.db.insert(u.polymarketLeaders).values({trader:t.proxyWallet,rank:parseInt(t.rank),userName:t.userName||null,xUsername:t.xUsername||null,verifiedBadge:t.verifiedBadge||!1,profileImage:t.profileImage||null,vol:t.vol||0,pnl:t.pnl||0,updatedAt:new Date(e)}).onConflictDoUpdate({target:u.polymarketLeaders.trader,set:{rank:parseInt(t.rank),userName:t.userName||null,xUsername:t.xUsername||null,verifiedBadge:t.verifiedBadge||!1,profileImage:t.profileImage||null,vol:t.vol||0,pnl:t.pnl||0,updatedAt:new Date(e)}})}async function Re(r,e){const t=Date.now();for(const s of e){const n=JSON.stringify(s.tags||s.market_tags||[]),o=`${r}-${s.market_id||s.id||Math.random()}`;await h.db.insert(u.polymarketPositions).values({id:o,traderId:r,marketId:s.market_id||s.id,marketTitle:s.market_title||s.title||"",cashPnl:s.cashPnl||s.cash_pnl||0,realizedPnl:s.realizedPnl||s.realized_pnl||0,tags:n,createdAt:new Date(t)}).onConflictDoUpdate({target:u.polymarketPositions.id,set:{cashPnl:s.cashPnl||s.cash_pnl||0,realizedPnl:s.realizedPnl||s.realized_pnl||0,tags:n}})}}async function $e(r){const e=Date.now();await h.db.delete(u.polymarketCategories);for(const t of r)await h.db.insert(u.polymarketCategories).values({tag:t.tag,pnl:t.pnl,updatedAt:new Date(e)})}async function Oe(r){const e=Date.now();for(const t of r)await h.db.insert(u.polymarketMarkets).values({id:t.id,question:t.question,slug:t.slug,description:t.description||null,image:t.imageUrl||t.image||null,volume24hr:t.volume24hr||0,volumeTotal:t.volumeNum||t.volumeTotal||0,active:t.active??!0,closed:t.closed??!1,outcomes:JSON.parse(t.outcomes||[]),outcomePrices:JSON.parse(t.outcomePrices||[]),tags:JSON.stringify(t.tags||[]),endDate:t.endDate||null,groupItemTitle:t.groupItemTitle||null,enableOrderBook:t.enableOrderBook??!1,createdAt:new Date(e),updatedAt:new Date(e)}).onConflictDoUpdate({target:u.polymarketMarkets.id,set:{question:t.question,description:t.description||null,image:t.imageUrl||t.image||null,volume24hr:t.volume24hr||0,volumeTotal:t.volumeNum||t.volumeTotal||0,active:t.active??!0,closed:t.closed??!1,outcomes:JSON.parse(t.outcomes||[]),outcomePrices:JSON.parse(t.outcomePrices||[]),tags:JSON.stringify(t.tags||[]),endDate:t.endDate||null,groupItemTitle:t.groupItemTitle||null,enableOrderBook:t.enableOrderBook??!1,updatedAt:new Date(e)}})}async function Ha(r,e){const t=Date.now();if(await h.db.delete(u.polymarketMarketPositions).where(_.eq(u.polymarketMarketPositions.marketId,r)),!(!e||!e.bids||!e.asks)){for(const s of e.bids||[]){const n=`${r}-buy-${s.price}-${Date.now()}-${Math.random()}`;await h.db.insert(u.polymarketMarketPositions).values({id:n,marketId:r,outcome:s.outcome||"Yes",price:s.price||0,size:s.size||0,side:"buy",totalValue:(s.price||0)*(s.size||0),createdAt:new Date(t)})}for(const s of e.asks||[]){const n=`${r}-sell-${s.price}-${Date.now()}-${Math.random()}`;await h.db.insert(u.polymarketMarketPositions).values({id:n,marketId:r,outcome:s.outcome||"No",price:s.price||0,size:s.size||0,side:"sell",totalValue:(s.price||0)*(s.size||0),createdAt:new Date(t)})}}}async function Ja(r,e){const t=Date.now(),s=`debate-${r}`;await h.db.insert(u.polymarketDebates).values({id:s,marketId:r,question:e.question,yesArguments:JSON.stringify(e.yesArguments),noArguments:JSON.stringify(e.noArguments),yesSummary:e.yesSummary,noSummary:e.noSummary,keyFactors:JSON.stringify(e.keyFactors),uncertainties:JSON.stringify(e.uncertainties),currentYesPrice:e.currentYesPrice,currentNoPrice:e.currentNoPrice,llmProvider:e.llmProvider||null,model:e.model||null,createdAt:new Date(t),updatedAt:new Date(t)}).onConflictDoUpdate({target:u.polymarketDebates.marketId,set:{question:e.question,yesArguments:JSON.stringify(e.yesArguments),noArguments:JSON.stringify(e.noArguments),yesSummary:e.yesSummary,noSummary:e.noSummary,keyFactors:JSON.stringify(e.keyFactors),uncertainties:JSON.stringify(e.uncertainties),currentYesPrice:e.currentYesPrice,currentNoPrice:e.currentNoPrice,llmProvider:e.llmProvider||null,model:e.model||null,updatedAt:new Date(t)}})}async function Ga(r="vol",e=50){const t=r==="vol"?u.polymarketLeaders.vol:r==="pnl"?u.polymarketLeaders.pnl:u.polymarketLeaders.overallGain;return await h.db.select().from(u.polymarketLeaders).orderBy(_.desc(t)).limit(e)}async function Ya(r){return await h.db.select().from(u.polymarketPositions).where(_.eq(u.polymarketPositions.traderId,r))}async function Za(){const r=await h.db.select().from(u.polymarketCategories).orderBy(_.desc(u.polymarketCategories.pnl)).limit(20),e=await h.db.select().from(u.polymarketCategories).orderBy(_.asc(u.polymarketCategories.pnl)).limit(20);return{best:r,worst:e}}async function Xa(r={}){const{limit:e=50,sortBy:t="volume24hr",category:s,activeOnly:n=!0}=r;let o=h.db.select().from(u.polymarketMarkets);n&&(o=o.where(_.eq(u.polymarketMarkets.active,!0)));const i=t==="volume24hr"?u.polymarketMarkets.volume24hr:t==="volumeTotal"?u.polymarketMarkets.volumeTotal:u.polymarketMarkets.createdAt;o=o.orderBy(_.desc(i)),o=o.limit(e);const l=await o;return s?l.filter(c=>{try{return JSON.parse(c.tags||"[]").includes(s)}catch{return!1}}):l}async function Qa(){const r=await h.db.select().from(u.polymarketMarkets).where(_.eq(u.polymarketMarkets.active,!0)).orderBy(_.desc(u.polymarketMarkets.volume24hr)).limit(100),e={};for(const t of r)try{const s=JSON.parse(t.tags||"[]");for(const n of s)e[n]||(e[n]=[]),e[n].push(t)}catch{}return e}async function er(r){return await h.db.select().from(u.polymarketMarketPositions).where(_.eq(u.polymarketMarketPositions.marketId,r)).orderBy(_.desc(u.polymarketMarketPositions.totalValue))}async function tr(r){const e=await h.db.select().from(u.polymarketDebates).where(_.eq(u.polymarketDebates.marketId,r)).limit(1);return e.length>0?e[0]:null}function Ee(r){const e=new Map;for(const o of r){const i=Number(o.cash_pnl||o.cashPnl||o.realized_pnl||o.realizedPnl||0);if(!i)continue;let l=o.tags||o.market_tags||[];if(typeof l=="string")try{l=JSON.parse(l)}catch{l=[]}for(const c of l){const d=e.get(c)||0;e.set(c,d+i)}}const t=Array.from(e.entries()).map(([o,i])=>({tag:o,pnl:i}));t.sort((o,i)=>i.pnl-o.pnl);const s=t.slice(0,20),n=[...t].sort((o,i)=>o.pnl-i.pnl).slice(0,20);return{best:s,worst:n}}async function qe(r=100){console.log("Starting Polymarket markets sync..."),await h.db.delete(u.polymarketMarkets);const e=await xe(r,"volume24hr");return await Oe(e),console.log(`Saved ${e.length} markets`),{markets:e.length}}async function ze(r={}){console.log("Starting Polymarket leaderboard sync...");const e=await De(r);return await Ie(e),console.log(`Saved ${e.length} leaderboard entries`),{leaders:e.length}}async function Ue(){console.log("Starting Polymarket sync...");const r=await Le(50);await Ce(r),console.log(`Saved ${r.length} leaders`);const e=[];for(const s of r){const n=s.trader,o=await Me(n);await Re(n,o),e.push(...o),console.log(`Saved positions for trader ${n}`)}const t=Ee(e);return await $e([...t.best,...t.worst]),console.log(`Saved ${t.best.length+t.worst.length} categories`),{leaders:r.length,positions:e.length}}async function ar(){console.log("Starting full Polymarket sync...");const r=await qe(),e=await ze({limit:100,orderBy:"VOL"}),t=await Ue();return{markets:r.markets,leaderboard:e.leaders,leaders:t.leaders,positions:t.positions}}const ae="data/stock-names.json",B="data/sectors-industries.json",W={fields:["symbol","name","industryId","marketCap","cik"]},rr="https://scanner.tradingview.com/america/scan",sr=["nasdaq","nyse","amex"],nr="https://api.nasdaq.com/api/screener/stocks?tableonly=true&limit=25&offset=0&download=true",or=0,ir=[" American Depositary Shares"," Depositary Shares"," Ordinary Shares"," Common Stock"," Common Shares"," Capital Stock"," Units"," Warrants"," Warrant"," Rights"," Preferred Stock"," Preferred Shares"," Depositary Share"," Ordinary Share"," Common Share"],re=r=>{let e=r;for(const t of ir){const s=new RegExp(t+".*$","i");if(s.test(e)){e=e.replace(s,"");break}}return e},lr=r=>{if(!r)return 0;const e=parseFloat(String(r).replace(/,/g,"").replace(/\$/g,""));return isNaN(e)?0:Math.round(e/1e6)};function cr(){if(D.existsSync(B))try{const r=JSON.parse(D.readFileSync(B,"utf-8"));console.log(`Loaded existing mappings: ${Object.keys(r.sectors||{}).length} sectors, ${Object.keys(r.industries||{}).length} industries`);const e={},t={};for(const[s,n]of Object.entries(r.sectors||{}))e[n]=s;for(const[s,n]of Object.entries(r.industries||{}))t[n]=s;return{sectors:r.sectors||{},industries:r.industries||{},sectorsReverse:e,industriesReverse:t,industryToSector:r.industryToSector||{}}}catch(r){console.warn("Error loading existing mappings, starting fresh:",r)}return{sectors:{},industries:{},sectorsReverse:{},industriesReverse:{},industryToSector:{}}}function z(r,e,t){if(e[r])return e[r];const s=Object.values(e),n=s.length>0?Math.max(...s)+1:1;return e[r]=n,t[n]=r,n}async function dr(){const r={headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:85.0) Gecko/20100101 Firefox/85.0","Content-Type":"application/json"}};try{console.log("Fetching symbols from TradingView...");const e=await fetch(rr,r);if(!e.ok)throw new Error(`TradingView request failed. Status Code: ${e.status}`);const t=await e.json(),s=new Set;return t.data&&Array.isArray(t.data)&&t.data.forEach(n=>{if(n.s){const[o,i]=n.s.split(":");o&&i&&["NYSE","NASDAQ","AMEX"].includes(o.toUpperCase())&&s.add(i)}}),console.log(`Fetched ${s.size} symbols from TradingView (NYSE, NASDAQ, AMEX only)`),console.log(`Total count from TradingView: ${t.totalCount||0}`),s}catch(e){return console.error("Error fetching TradingView symbols:",e),new Set}}async function ur(r){const e=`${nr}&exchange=${r}`,t={headers:{"User-Agent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.15; rv:85.0) Gecko/20100101 Firefox/85.0"}};try{const s=await fetch(e,t);if(!s.ok)throw new Error(`Request failed. Status Code: ${s.status}`);return await s.json()}catch(s){return console.error(`Error fetching ${r}:`,s),null}}async function mr(){const r="data/company_tickers.json";try{if(console.log("Loading SEC CIK data from local file..."),!D.existsSync(r))return console.warn(`SEC data file not found: ${r}`),console.warn("Skipping CIK data. Download from: https://www.sec.gov/files/company_tickers.json"),{tickerToCik:new Map,secCompanies:new Map};const e=D.readFileSync(r,"utf-8"),t=JSON.parse(e),s=new Map,n=new Map;return Object.values(t).forEach(o=>{o.ticker&&o.cik_str&&(s.set(o.ticker,o.cik_str),n.set(o.ticker,{ticker:o.ticker,name:o.title,cik:o.cik_str}))}),console.log(`Loaded ${s.size} SEC tickers with CIK numbers from local file`),{tickerToCik:s,secCompanies:n}}catch(e){return console.error("Error loading SEC data:",e),{tickerToCik:new Map,secCompanies:new Map}}}async function pr(){try{console.log("Fetching stock data..."),D.existsSync("data")||D.mkdirSync("data");const r=cr(),[e,t,s]=await Promise.all([dr(),Promise.all(sr.map(ur)),mr()]),{tickerToCik:n,secCompanies:o}=s,i=[];t.forEach(m=>{m&&m.data&&m.data.rows&&i.push(...m.data.rows)}),console.log(`Fetched ${i.length} total rows from NASDAQ/NYSE/AMEX.`);const l=new Map;i.forEach(m=>{m.symbol&&l.set(m.symbol.trim(),m)});const c=new Map;e.forEach(m=>{if(!c.has(m)){const b=l.get(m),S=n.get(m)||0;if(b){const P=b.sector?String(b.sector).trim():"Unknown",k=b.industry?String(b.industry).trim():"Unknown",N=z(P,r.sectors,r.sectorsReverse),w=z(k,r.industries,r.industriesReverse);r.industryToSector[w]=N;const v=W.fields.map(x=>x==="symbol"?m:x==="name"?re(b.name?b.name.trim():""):x==="industryId"?w:x==="marketCap"?lr(b.marketCap):x==="cik"?S:b[x]);c.set(m,v)}else{const P=o.get(m),k=z("Unknown",r.sectors,r.sectorsReverse),N=z("Unknown",r.industries,r.industriesReverse);r.industryToSector[N]=k;const w=W.fields.map(v=>v==="symbol"?m:v==="name"?P?re(P.name):m:v==="industryId"?N:v==="marketCap"?0:v==="cik"?S:0);c.set(m,w)}}}),console.log(`Total unique tickers from TradingView core index: ${c.size}`),console.log(`Tickers with NASDAQ data: ${Array.from(c.values()).filter(m=>m[3]!==0&&m[3]!==null).length}`),console.log(`Total sectors: ${Object.keys(r.sectors).length}`),console.log(`Total industries: ${Object.keys(r.industries).length}`),console.log(`Industry-to-Sector mappings: ${Object.keys(r.industryToSector).length}`),console.log(`Output fields: ${JSON.stringify(W.fields)}`),D.writeFileSync(B,JSON.stringify({sectors:r.sectors,industries:r.industries,industryToSector:r.industryToSector},null,2)),console.log(`Successfully wrote mappings to ${B}`);const d=Array.from(c.values()).sort((m,b)=>{const S=String(m[0]||""),P=String(b[0]||"");return S.localeCompare(P)});D.writeFileSync(ae,JSON.stringify(d)),console.log(`Successfully wrote ${d.length} stocks to ${ae}`);const y={},p={sector:"Overall US Public Stocks",totalCompanies:0,totalMarketCap:0,industries:{},companies:[]};d.forEach(m=>{const b=m[0],S=m[1],P=m[2],k=typeof m[3]=="number"?m[3]:0,N=r.industryToSector[P]||0,w=r.sectorsReverse[N]||"Unknown",v=r.industriesReverse[P]||"Unknown";y[w]||(y[w]={totalCompanies:0,totalMarketCap:0,industries:{},companies:[]}),y[w].totalCompanies++,y[w].totalMarketCap+=k,y[w].industries[v]||(y[w].industries[v]={name:v,totalCompanies:0,totalMarketCap:0,leader:{symbol:b,name:S,_marketCap:k}}),y[w].industries[v].totalCompanies++,y[w].industries[v].totalMarketCap+=k,k>y[w].industries[v].leader._marketCap&&(y[w].industries[v].leader={symbol:b,name:S,_marketCap:k}),p.totalCompanies++,p.totalMarketCap+=k,p.companies.push({symbol:b,name:S,marketCap:k})});const g=(m,b,S=!0)=>{m.companies.sort((w,v)=>v.marketCap-w.marketCap);const P=m.companies.slice(0,10);let k=[];S&&(k=Object.values(m.industries).sort((w,v)=>v.totalMarketCap-w.totalMarketCap).map(w=>{const{_marketCap:v,...x}=w.leader||{};return{...w,leader:x}}));const N={sector:b,totalCompanies:m.totalCompanies,totalMarketCap:m.totalMarketCap,top10Companies:P};return S&&(N.industries=k),N},A=Object.keys(y).map(m=>g(y[m],m,!0));A.sort((m,b)=>b.totalMarketCap-m.totalMarketCap),A.unshift(g(p,"Overall US Public Stocks",!1));const T="data/sector-info.json";D.writeFileSync(T,JSON.stringify(A,null,2)),console.log(`Successfully wrote to ${T}`)}catch(r){console.error("An error occurred:",r),process.exit(1)}}pr();const yr="/A",$=10,gr="CIK{cik}.json",hr="https://data.sec.gov/submissions/{submission}",Fe=/^\d{10}-\d{2}-\d{6}$/;class fr{constructor(e,t){this._tickerToCikMapping=null,this._initPromise=null,this.companyName=e,this.emailAddress=t}get userAgent(){return`${this.companyName} ${this.emailAddress}`}async init(){return this._initPromise||(this._initPromise=this._loadTickerToCikMapping()),this._initPromise}async _loadTickerToCikMapping(){this._tickerToCikMapping||(this._tickerToCikMapping=await wr(this.userAgent))}async getFilingMetadatas(e,t={}){await this.init();const{includeAmends:s=!1}=t;if(typeof e=="string"){const n=E.fromString(e,!1);n&&(e=n)}if(e instanceof E)return[await vr({tickerOrCik:e.tickerOrCik,accessionNumber:e.accessionNumber,userAgent:this.userAgent,tickerToCikMapping:this._tickerToCikMapping,includeAmends:s})];if(typeof e=="string"&&(e=O.fromString(e)),e instanceof O)return await br({requested:e,userAgent:this.userAgent,tickerToCikMapping:this._tickerToCikMapping,includeAmends:s});throw new Error(`Invalid input: ${e}`)}async downloadFiling({url:e}){return await kr(e,this.userAgent)}async getFilingHtml(e={}){let{query:t,ticker:s,form:n}=e;if(t&&(s||n))throw new Error("Error: Ticker or form should not be provided when query is specified.");if((s||n)&&t)throw new Error("Error: Query should not be provided when ticker or form is specified.");if((s||n)&&(t=`${s}/${n}`),!t)throw new Error("Error: Either query or ticker and form must be specified.");const o=await this.getFilingMetadatas(t);if(o.length===0)throw new Error(`Could not find filing for ${t}`);if(o.length>1)throw new Error(`Found multiple filings for ${t}. Use 'getFilingMetadatas()' and 'downloadFiling()' instead.`);return await this.downloadFiling({url:o[0].primaryDocUrl})}}class O{constructor(e,t,s=null){this.tickerOrCik=e,this.formType=t,this.limit=s}static fromString(e){const t=e.split("/");if(t.length<2)throw new Error(`Invalid query string format: ${e}`);const[s,n,o]=t,i=o?parseInt(o):null;return new O(s,n,i)}}class E{constructor(e,t){this.tickerOrCik=e,this.accessionNumber=t}static fromString(e,t=!0){const s=e.split("/");if(s.length===2){const[n,o]=s;if(Fe.test(o)||o.length===18)return new E(n,o)}if(t)throw new Error(`Invalid company and accession number format: ${e}`);return null}}function Be(r,e){if(/^\d+$/.test(r))return r.padStart($,"0");const t=e[r.toUpperCase()];if(!t)throw new Error(`Could not find CIK for ticker: ${r}`);return t.padStart($,"0")}async function wr(r){try{const e=await import("fs/promises"),s=(await import("path")).join(__dirname,"../data","company_tickers.json"),n=await e.readFile(s,"utf-8"),o=JSON.parse(n),i={};if(Array.isArray(o)){for(const l of o)if(l&&l.length>=3&&l[0]&&l[2]){const c=String(l[0]).padStart($,"0"),d=l[2].toUpperCase();i[d]=c}}return i}catch{const s=await I.get("https://www.sec.gov/files/company_tickers.json",{headers:{"User-Agent":r}}),n={},o=s.data;for(const i in o){const l=o[i];if(l.ticker&&l.cik_str){const c=String(l.cik_str).padStart($,"0"),d=l.ticker.toUpperCase();n[d]=c}}return n}}async function kr(r,e){try{const t=await I.get(r,{headers:{"User-Agent":e},responseType:"arraybuffer"});return Buffer.from(t.data)}catch(t){throw new Error(`Failed to download filing from ${r}: ${t}`)}}async function vr(r){const{tickerOrCik:e,accessionNumber:t,userAgent:s,tickerToCikMapping:n,includeAmends:o}=r;let i=t;if(t.length===18&&(i=`${t.slice(0,10)}-${t.slice(10,12)}-${t.slice(12)}`),!Fe.test(i))throw new Error(`Invalid Accession Number: ${t}`);const l=Be(e,n),c=await je({cik:l,userAgent:s,limit:1,accessionNumber:i,includeAmends:o});if(c.length===0)throw new Error(`Could not find filing for ${t}`);return c[0]}async function br(r){const{requested:e,userAgent:t,tickerToCikMapping:s,includeAmends:n}=r,o=Be(e.tickerOrCik,s);let i;if(e.limit===null)i=Number.MAX_SAFE_INTEGER;else if(i=parseInt(String(e.limit)),i<1)throw new Error("Invalid amount. Please enter a number greater than 1.");return await je({cik:o,userAgent:t,limit:i,tickerOrCik:e.tickerOrCik,formType:e.formType,includeAmends:n})}async function je(r){const{cik:e,userAgent:t,limit:s,tickerOrCik:n,accessionNumber:o,formType:i,includeAmends:l=!1}=r,c=gr.replace("{cik}",e),d=hr.replace("{submission}",c),p=(await I.get(d,{headers:{"User-Agent":t}})).data,g=p.filings.recent,A=[],T=g.accessionNumber||[],m=g.primaryDocument||[],b=g.filingDate||[],S=g.reportDate||[],P=g.form||[];for(let k=0;k<T.length&&A.length<s;k++){const N=T[k],w=m[k],v=b[k],x=S[k];let M=P[k];const Z=M.endsWith(yr);if(M=Z?M.slice(0,-2):M,i&&i!==M||o&&o!==N||Z&&!l)continue;const Ke=N.replace(/-/g,""),Ve=`https://www.sec.gov/Archives/edgar/data/${parseInt(e)}/${Ke}/${w}`;A.push({primaryDocUrl:Ve,accessionNumber:N,tickers:(p.tickers||[]).map((He,Je)=>({symbol:He,exchange:p.exchanges?.[Je]||""})),companyName:p.name,filingDate:v,reportDate:x,primaryDocDescription:"",items:"",formType:M,cik:String(p.cik).padStart($,"0")})}return A}const L=new ft({suppressNotices:["ripHistorical"]});class We{async getHistoricalData(e){const{symbol:t,period1:s,period2:n,interval:o="1d"}=e;try{const i=await L.chart(t,{period1:s,period2:n,interval:o});return{success:!0,symbol:t,data:i.quotes,meta:i.meta}}catch(i){return{success:!1,error:i.message||"Failed to fetch historical data"}}}async getQuote(e){const{symbol:t,modules:s=["price","summaryDetail","defaultKeyStatistics","financialData"]}=e;try{const n=await L.quoteSummary(t,{modules:s});return{success:!0,symbol:t,data:n}}catch(n){return{success:!1,error:n.message||"Failed to fetch quote"}}}async search(e){try{const t=await L.search(e);return{success:!0,query:e,results:t.quotes}}catch(t){return{success:!1,error:t.message||"Failed to search"}}}async getOptions(e,t){try{const s=await L.options(e,t?{date:t}:{});return{success:!0,symbol:e,data:s}}catch(s){return{success:!1,error:s.message||"Failed to fetch options"}}}async getTrending(e="US"){try{const t=await L.trendingSymbols(e);return{success:!0,region:e,data:t}}catch(t){return{success:!1,error:t.message||"Failed to fetch trending"}}}async getRecommendations(e){try{const t=await L.quoteSummary(e,{modules:["recommendationTrend","upgradeDowngradeHistory"]});return{success:!0,symbol:e,data:t}}catch(t){return{success:!1,error:t.message||"Failed to fetch recommendations"}}}async getFinancials(e){try{const t=await L.quoteSummary(e,{modules:["incomeStatementHistory","balanceSheetHistory","cashflowStatementHistory","earnings"]});return{success:!0,symbol:e,data:t}}catch(t){return{success:!1,error:t.message||"Failed to fetch financials"}}}}const _r=new We;exports.APP_EMAIL=Gt;exports.APP_NAME=Jt;exports.AlpacaMCPClient=ke;exports.BearResearcher=he;exports.BullResearcher=ge;exports.CompanyAndAccessionNumberClass=E;exports.Downloader=fr;exports.FinancialSituationMemory=C;exports.InvestmentJudge=fe;exports.LAST_REVISED_DATE=Yt;exports.MarketAnalyst=ye;exports.RequestedFilingsClass=O;exports.StockAgentsAPI=be;exports.TOP_STOCKS=ve;exports.Trader=we;exports.TradingAgentsGraph=ha;exports.UnifiedLLMClient=ue;exports.YFinanceWrapper=We;exports.alpacaMCPClient=q;exports.analyzeCategories=Ee;exports.analyzeStock=xa;exports.analyzeTopStocks=Da;exports.auth=Ht;exports.authClient=se;exports.backtestStock=La;exports.chatWithAI=Pa;exports.cn=oa;exports.createAlpacaClient=ba;exports.createLLM=V;exports.db=de;exports.demoAgents=ea;exports.demoPortfolio=Zt;exports.demoPositions=ra;exports.demoPredictionMarkets=ta;exports.demoRiskMetrics=na;exports.demoSignals=Qt;exports.demoStrategies=Xt;exports.demoTopTraders=aa;exports.demoTrades=sa;exports.fetchLeaderboard=De;exports.fetchMarketDetails=Va;exports.fetchMarketOrderBook=Ka;exports.fetchMarkets=xe;exports.fetchTopTraders=Le;exports.fetchTraderPositions=Me;exports.fetchZuluTraderDetail=Ae;exports.fetchZuluTraders=_e;exports.generateDebateAnalysis=ja;exports.generateDebateAnalysisWithOpenAI=Wa;exports.getAccount=Aa;exports.getCategories=Za;exports.getFundamentals=la;exports.getIndicators=pe;exports.getLeaders=Ga;exports.getMarketDebate=tr;exports.getMarketPositions=er;exports.getMarkets=Xa;exports.getMarketsByCategory=Qa;exports.getNews=ca;exports.getQuote=Sa;exports.getServiceHealth=Ma;exports.getStockData=me;exports.getTraderPositions=Ya;exports.getZuluTopByRank=qa;exports.getZuluTraderById=Ea;exports.getZuluTraders=Oa;exports.myLeadersAPI=J;exports.placeOrder=Ta;exports.queryKeys=Ca;exports.saveCategories=$e;exports.saveDebateAnalysis=Ja;exports.saveLeaderboardData=Ie;exports.saveLeaders=Ce;exports.saveMarketPositions=Ha;exports.saveMarkets=Oe;exports.savePositions=Re;exports.saveZuluCurrencyStats=Te;exports.saveZuluTraders=Y;exports.searchZuluTraders=za;exports.setStateInURL=ia;exports.signIn=kt;exports.signOut=vt;exports.stockAgentsAPI=R;exports.syncAll=ar;exports.syncLeaderboard=ze;exports.syncLeadersAndCategories=Ue;exports.syncMarkets=qe;exports.syncZuluTraderDetails=Fa;exports.syncZuluTraders=Ua;exports.useSession=wt;exports.yfinance=_r;
